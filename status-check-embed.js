var attribute={},element={},predictionTimer=null;let CLASSNAME={MISMATCH:"mismatch",MISSING:"missing",MATCH:"match",PRESENT:"present",NOT_APPLICABLE:"not_applicable"};async function loadWidget(){let e=document.querySelector("div.ub_status_check_widget");if(e){if(attribute=getWidgetAttributes(e),await loadStatusCheckMessages(attribute.key,attribute.language??"de"),!statusCheckMessages)return null;e.innerHTML='<style> * { font-size: 14px; font-family: system-ui, -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Oxygen, Ubuntu, Cantarell, \'Open Sans\', \'Helvetica Neue\', sans-serif; } #ubformfield[disabled] { opacity: 0.6; } #ubwrap, .ub_status_check_widget { display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; padding-top: 0px; position: relative; z-index: 888; box-sizing: border-box; min-height: 540px; background: white; } #ubwrap { visibility: hidden; } #ubinwrap { position: absolute; top: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; background: white; } #ubformfield input, #ubformfield select { /*border-radius: 2px;*/ /*background-color: rgba(0, 0, 0, 0.437);*/ /*color: #ffffff;*/ color: #808080; border-radius: 10px; border: 1px solid #ffffff61; height: 40px; width: 100%; box-sizing: border-box; padding-left: 10px; outline: none; } #ubformfield input:disabled, #ubformfield select:disabled { outline: none; border: none; /*opacity: 0.4;*/ } #ubformfield label { /*display: none;*/ color: #ffffff; margin: 5px 8px; font-size: 10px; letter-spacing: 1px; user-select: none; overflow: hidden; text-wrap: nowrap; word-wrap: none; } #ubformfield label[for="ubsend"] { visibility: hidden; } div#addressprediction { position: relative; width: 70%; padding: 5px; box-sizing: border-box; } #ubformfield { display: flex; justify-content: center; align-items: center; flex-direction: column; border-radius: 40px; /*background: linear-gradient(.45turn, rgb(170, 230, 255), rgb(0, 140, 255));*/ background-color: #60AB60; width: 100%; min-width: 650px; max-width: 1200px; height: 180px; } form#ubform { width: 70%; display: flex; justify-content: center; align-items: center; } button#ubsend { /*background-color: #95edff;*/ /*color: #0F6DE9;*/ /*border-radius: 2px;*/ /*text-shadow: 0px 0px 1px #0F6DE9;*/ border-radius: 20px 0px; background-color: #243f2f; color: white; height: 40px; width: 100%; border: none; font-size: 12px; letter-spacing: 0.1em; cursor: pointer; } button#ubsend:hover { opacity: 0.8; } button#ubsend:disabled { cursor: default; opacity: 0.5; } input::placeholder { color: #ffffff5d; } div#ubname, div#ubstreet, div#ubzip, div#ubcountry, div#ubsend { display: flex; flex-direction: column; margin: 5px; height: 100%; } div#ubname, div#ubstreet { width: 80%; } div#ubzip { width: 30%; } div#ubcountry { width: 60%; } div#ubsend { width: 80%; } #queryInfo { display: none; flex-direction: column; justify-content: center; align-items: center; width: 100%; } #queryCaptionText { text-align: center; margin-top: 15px; font-style: italic; color: rgb(119, 137, 159); user-select: none; } #searchQuery { max-width: 60%; text-align: center; font-size: 16px; font-weight: bold; margin-bottom: 10px; color: rgb(76, 98, 125); } #queryLine { width: 100%; display: flex; justify-content: center; align-items: center; cursor: pointer; margin: 10px 0px; } #queryLine * { margin: 0px 5px; } /*#searchQuery::after { content: "üñäÔ∏è"; margin: 0px 5px; display: inline-block; cursor: pointer; }*/ #topinfo { display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; height: 100%; } #bottominfo { max-width: 1000px; visibility: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; height: 100%; } span { color: inherit; } #bottominfo hr { border: none; border-top: 2px solid rgb(234, 234, 234); width: 100%; } #resultsListText, #nearMe360Text { font-size: 20px; width: 100%; text-align: left; font-weight: bold; margin: 5px; color: rgb(37, 81, 128); padding-left: 100px; } #qualityText { margin: 10px 0px; color: rgb(119, 137, 159); user-select: none; } #totalPortals { font-weight: bold; font-size: 16px; margin: 2px; color: inherit; } #resultsList { display: flex; align-items: center; justify-content: center; flex-direction: column; width: 100%; } #result { width: 100%; /*height: 170px;*/ /*min-height: 170px;*/ min-height: 100px; height: 110px; max-height: 170px; display: flex; align-items: center; /*padding: 30px;*/ padding: 15px; box-sizing: border-box; } #result a { text-decoration: none; color: inherit; } #result #name { font-size: 18px; font-weight: bold; color: #2c2c2c; } #result .portaldiv { height: 100%; width: 20%; display: flex; flex-direction: column; justify-content: center; align-items: center; font-weight: bolder; margin: 0px 20px; } #result #portal_img { width: 100%; max-width: 45px; } #result #portal_name { color: #656565; } #header { margin: 20px 0px 20px; } #header #headertext { font-size: 30px; font-weight: bold; letter-spacing: -2px; color: rgb(64, 101, 146); color: #525252; user-select: none; } #result .infos { display: flex; flex-direction: column; align-items: flex-start; justify-content: space-evenly; height: 100%; width: 50%; text-wrap: nowrap; overflow: hidden; } #result #details { display: flex; flex-direction: column; align-items: flex-start; justify-content: space-evenly; height: 100%; width: 100%; color: #2c2c2c; } #result svg { height: 60px; width: 50px; fill: #ececec; } #result .svgdiv { width: 10%; margin: 0px 10px; text-align: center; } #result .missing, #result .mismatch { fill: rgb(232, 99, 99); color: rgb(232, 99, 99); font-weight: bold; } #result span.not_applicable { font-style: italic; color: #a3a3a3; } #result svg.not_applicable { fill: rgba(163, 163, 163, 0.196); } #result svg.match, #result svg.present { fill: rgb(99, 166, 99); } #result:nth-child(odd) { background-color: var(--altColor) } #graphInfo { width: 100%; height: 100%; display: flex; justify-content: space-evenly; align-items: center; } #ubcta { display: flex; flex-direction: column; } #ubcta button#ctabutton { border-radius: 20px 0px; background-color: #5a859d; background: radial-gradient(#5a859d, #96b4c5); color: white; height: 60px; width: 100%; border: none; font-size: 14px; letter-spacing: 0.1em; margin: 20px 0px; cursor: pointer; user-select: none; } #ubcta button#ctabutton:hover { opacity: 0.6; } #ubcta span#ctatext { text-align: center; max-width: 270px; font-size: 24px; margin: 20px 0px; font-weight: bold; color: #3b5969; user-select: none; } #ubtable, #ubnearme360 { width: 100%; } #ubgridwrap { display: none; flex-direction: column; align-items: center; justify-content: center; width: 900px; margin: 30px; user-select: none; } #ubgridcaption { font-weight: bold; font-size: 16px; color: #525252; } #ubgrid { display: flex; justify-content: center; flex-wrap: wrap; width: 100%; margin: 30px; } #ubgrid .gridEntry { width: 128px; height: 51px; max-width: 128px; max-height: 51px; display: flex; flex-direction: column; justify-content: center; align-items: center; box-sizing: border-box; margin-bottom: 20px; color: #606060; } #ubgrid .gridEntry img, #ubgrid .gridEntry .gridEntryLogo { max-height: 32px; } #ubgrid .gridEntry .gridEntryName { font-size: 11px; text-align: center; text-shadow: 0px 0px 2px rgb(143, 134, 134); } .flatback { position: fixed; inset: 0px; z-index: 9998; display: none; justify-content: center; align-items: center; z-index: 99999; } .loading { position: absolute; background-color: rgba(14, 26, 36, 0.5); top: 0px; left: 0px; height: 100%; width: 100%; display: none; justify-content: center; align-items: center; } .loading img { max-width: 200px; } .modal { background-color: #ffffff; box-shadow: 0px 0px 25px #000000ab; border-radius: 50px; min-width: 700px; min-height: 400px; display: flex; flex-direction: column; justify-content: space-evenly; align-items: center; color: white; box-sizing: border-box; padding: 10px; } .error { position: absolute; background-color: rgba(14, 26, 36, 0.5); top: 0px; left: 0px; height: 100%; width: 100%; display: none; justify-content: center; align-items: center; } .emodal { background-color: #ffffff; box-shadow: 0px 0px 25px #000000ab; border-radius: 10px; max-width: 450px; padding: 30px; display: flex; flex-direction: column; justify-content: center; align-items: center; color: #4b4b4b; text-align: center; user-select: none; } .closebtn { height: 36px; width: 50%; border-radius: 10px; background-color: #1e6eb3b3; border: none; color: white; user-select: none; cursor: pointer; font-style: bolder; font-size: 12px; letter-spacing: 1px; } #myProgress { width: 60%; background-color: #94ba3354; border-radius: 30px 0px; overflow: hidden; } #myBar { width: 1%; height: 13px; background-color: #94BA33; border-radius: 30px 0px; } #skipSvg { width: 32px; height: 27px; fill: #97A5FB; cursor: pointer; } #skipSvg[disabled] { opacity: 0.2; cursor: default; } /* Basic styling for the input and dropdown */ #predictionList { display: flex; flex-direction: column; width: 100%; z-index: 999999; background-color: white; border-radius: 5px 5px 10px 10px; text-wrap: nowrap; position: absolute; overflow: hidden; box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.383); box-sizing: border-box; } #predictionEntry { height: auto; width: 100%; padding: 10px; cursor: pointer; border-bottom: 1px solid rgba(0, 0, 0, 0.111); box-sizing: border-box; } #predictionEntry img { margin: 0px 10px; height: 16px; } #predictionEntry:hover { background-color: rgba(0, 0, 0, 0.1); } #timesInfo { user-select: none; cursor: default; box-shadow: 0px 0px 5px #0000006b; border-radius: 5px; padding: 10px; background-color: rgb(255, 255, 255); position: absolute; display: none; flex-direction: column; justify-content: flex-start; align-items: flex-start; text-align: left; margin-top: 40px; margin-left: 60px; z-index: 1000; } #timeLine { display: flex; align-items: center; justify-content: center; padding: 3px; } #timeLine svg { margin-right: 5px; } #pdfLink { display: flex; justify-content: space-evenly; align-items: center; margin-top: 15px; text-align: center; width: 100%; } #pdfLink .pdflinkbtn { color: #11647db3; border: 1px solid rgba(0, 0, 0, 0.2); box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.168); border-radius: 10px; padding: 5px 20px; cursor: pointer; user-select: none; /*background-color: rgb(249, 249, 249);*/ background: none; box-shadow: none; border: none; overflow: hidden; text-wrap: nowrap; } #pdfLink .pdflinkbtn img { margin-right: 10px; } #pdfLink .pdflinkbtn:hover { opacity: 0.7; } #pdfLink .pdflinkbtn:disabled { opacity: 0.4; border: none; cursor: default; } #pdfLink #copyLink { display: flex; align-items: center; justify-content: space-evenly; } #pdfLink #pdfExport { display: flex; align-items: center; justify-content: space-evenly; } .managed { color: #63A663; font-weight: bolder; } .nearMe360Line { display: flex; align-items: center; padding-left: 100px; margin: 20px; } .nearMe360Text { margin-left: 20px; user-select: none; } </style> <div class="flatback"> <div class="loading"> <div class="modal"> <img draggable="false" src="https://static.wixstatic.com/media/52c20f_24e1624f84364dfa9e9a51c913c6e6cf~mv2.gif"> <div id="myProgress"> <div id="myBar"></div> </div> <div id="skipCheck"> <svg disabled id="skipSvg" preserveAspectRatio="none" viewBox="0 0 512 440.638" image-rendering="optimizeQuality" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" height="441" width="512" xmlns="http://www.w3.org/2000/svg" data-type="shape" role="presentation" aria-hidden="true"> <path d="M175.62 399.21c9.75 2.44 15.69 12.33 13.25 22.08-2.44 9.76-12.33 15.69-22.08 13.25-59.06-14.88-106.52-52.3-135.48-100.77C2.34 285.3-8.14 225.8 6.72 166.78c14.87-59.06 52.3-106.5 100.77-135.47S215.46-8.14 274.48 6.72c20.6 5.19 39.82 13.14 57.33 23.35a219.44 219.44 0 0 1 47.18 36.99l.14-11.58c.13-10.04 8.38-18.07 18.41-17.94 10.03.13 18.06 8.38 17.94 18.4l-.71 58.06c-.02 1.86-.33 3.65-.87 5.33-1.66 9.08-9.99 15.59-19.38 14.8l-57.87-4.65c-10.01-.84-17.43-9.63-16.59-19.63.84-10 9.63-17.42 19.62-16.58l15.28 1.23c-.33-.3-.66-.62-.97-.95-11.78-12.38-25.35-23.21-40.42-31.99-14.61-8.52-30.68-15.17-47.92-19.51-49.36-12.43-99.06-3.7-139.5 20.47-40.44 24.17-71.68 63.78-84.1 113.1-12.43 49.35-3.7 99.06 20.47 139.49 24.17 40.44 63.79 71.68 113.1 84.1zM123.11 288.7l5.32-29.31c11.64 2.91 22.13 4.37 31.43 4.37 9.31 0 16.81-.38 22.51-1.14v-11.53l-17.1-1.52c-15.44-1.39-26.05-5.1-31.81-11.11-5.76-6.01-8.64-14.91-8.64-26.69 0-16.21 3.51-27.34 10.54-33.42 7.02-6.08 18.96-9.12 35.8-9.12 16.85 0 32.03 1.58 45.59 4.75L212 202.33c-11.78-1.9-21.21-2.84-28.3-2.84-7.1 0-13.11.31-18.05.94v11.34l13.68 1.33c16.58 1.65 28.05 5.61 34.38 11.87 6.33 6.27 9.5 14.98 9.5 26.12 0 7.98-1.08 14.72-3.24 20.23-2.15 5.51-4.71 9.69-7.68 12.54-2.99 2.84-7.2 5.03-12.64 6.55-5.44 1.52-10.22 2.43-14.34 2.75-4.11.32-9.59.48-16.43.48-16.46 0-31.72-1.65-45.77-4.94zm153.75-49.57v51.66h-37.99V172.08h37.99v48.43c1.71 0 19.22-44.1 21.27-48.43h41.03l-28.49 58.31 29.44 60.4h-41.03l-21.46-51.66h-.76zm76.07 51.66V172.08h37.98v118.71h-37.98zm121.08-28.69h-26.73v28.69h-35.95V172.08h59.83c27.22 0 40.84 14.62 40.84 43.87 0 16.08-3.55 27.99-10.64 35.71-2.66 2.91-6.34 5.38-11.02 7.41-4.68 2.02-10.13 3.03-16.33 3.03zm-26.73-61.67v33.32h10.78c4.55 0 7.88-.48 9.97-1.42 2.08-.95 3.13-3.14 3.13-6.56v-17.36c0-3.42-1.06-5.61-3.13-6.55-2.09-.94-5.43-1.43-9.97-1.43h-10.78zm-209 203.82c-18.71 1.5-23.29 28.46-4.04 35.46 2.66.81 4.7 1.08 7.52.85 12.97-1.16 26.57-3.61 39.08-7.21 20.42-5.96 16.15-36.68-6.37-35.74-1.23.11-2.46.31-3.63.66-8.66 3.03-23.3 5.15-32.56 5.98zm91.77-35c-6.7 5.02-9.03 13.68-6 21.43 4.52 11.06 18.25 14.97 27.83 7.78 10.62-7.8 20.59-16.91 29.58-26.53 2.87-3.05 4.65-7.3 4.83-11.45.74-17.07-19.88-25.75-31.6-13.34-7.26 7.94-15.98 15.74-24.64 22.11z" fill-rule="nonzero"></path> </svg> </div> </div> </div> <div class="error"> <div class="emodal"> <img draggable="false" src="https://static.wixstatic.com/media/52c20f_26036272f923465eb57deb56632f0b85~mv2.gif" style="height:64px"> <p></p> <button class="closebtn" id="closeError" onclick="toggleErrorModal(\'\', false)">Okay</button> </div> </div> </div> <div id="ubwrap"> <div id="ubinwrap"> <div id="header"> <span id="headertext"></span> </div> <div id="topinfo"> <div id="queryInfo"> <span id="queryCaptionText"></span> <div id="queryLine"> <span id="searchQuery"></span> <img src="https://cdn-icons-png.flaticon.com/512/3597/3597075.png" width="21" height="21"> </div> </div> <div id="ubformfield"> <div id="addressprediction"> <label for="prediction">Adresse Suche</label> <input title="prediction" id="prediction" placeholder="Suche..." autocomplete="off"> <div id="predictionList"></div> </div> <form id="ubform"> <div id="ubcountry"> <label for="ubcountry"></label> <select title="ubcountry" id="ubcountry"></select> </div> <div id="ubname"> <label for="ubname"></label> <input title="ubname" id="ubname" placeholder="Name"> </div> <div id="ubstreet"> <label for="ubstreet"></label> <input title="ubstreet" id="ubstreet" placeholder="Adresse"> </div> <div id="ubzip"> <label for="ubzip"></label> <input title="ubzip" id="ubzip" placeholder="PLZ" maxlength="5"> </div> <div id="ubsend"> <label for="ubsend">.</label> <button id="ubsend" type="button" onclick="searchInit()"></button> </div> </form> </div> </div> <div id="bottominfo"> <div id="pdfLink"> <button id="copyLink" class="pdflinkbtn"><img draggable="false" src="https://cdn-icons-png.freepik.com/512/7671/7671236.png" width="21" height="21"><span></span></button> <button id="pdfExport" class="pdflinkbtn" onclick="pdfExportInit()"><img draggable="false" src="https://www.iconpacks.net/icons/2/free-pdf-icon-3385-thumb.png" width="21" height="21"><span></span></button> </div> <span id="qualityText"><span id="totalPortals"></span></span> <div id="graphInfo"> <div id="ubgraph" style="display:block;"><canvas id="ubcanvas" width="300" height="300"></canvas> </div> <div id="ubcta"> <span id="ctatext"></span> <a id="ctalink"><button type="button" id="ctabutton" name="ctabutton"></button></a> </div> </div> <div id="ubnearme360" style="display:none"> <span id="nearMe360Text">Aufschl√ºsselung der Ergebnisse:</span> <hr> <div class="nearMe360Line" id="nearMe360nameDiv"> <div class="nearMe360Svg"> <svg id="nearMe360Svg" width="25" height="21" viewBox="0 0 25 21"> <path d="M25 8.61V6.44l-.04-.12a.79.79 0 00-.04-.1L21.46.37a.78.78 0 00-.68-.38H4.21a.78.78 0 00-.67.38L.09 6.18l-.01.05a.62.62 0 00-.04.1l-.02.06a.97.97 0 00-.02.18V8.6a3.73 3.73 0 002.64 3.56v6.9h-.3a.78.78 0 100 1.56h20.32a.78.78 0 00.78-.78.78.78 0 00-.78-.78h-.3v-6.9A3.73 3.73 0 0025 8.6zm-10.5 6.85v3.6h-4v-3.6h4zM2.15 5.78l2.5-4.22h15.7l2.5 4.22H2.14zm16.2 2.27a.78.78 0 00-.78.72 2.15 2.15 0 01-.68 1.43 2.15 2.15 0 01-2.93 0 2.15 2.15 0 01-.68-1.43.78.78 0 10-1.56 0 2.15 2.15 0 01-4.3 0 .78.78 0 10-1.56 0 2.15 2.15 0 01-3.69 1.32 2.15 2.15 0 01-.6-1.48V7.34h21.87v1.27a2.15 2.15 0 01-4.3.16.78.78 0 00-.79-.72zm-3.07 5.84H9.71a.78.78 0 00-.78.78v4.4H4.2V12.3a3.72 3.72 0 002.44-1.4 3.7 3.7 0 005.21.65 3.76 3.76 0 00.65-.65 3.7 3.7 0 005.21.65 3.76 3.76 0 00.65-.65 3.73 3.73 0 002.44 1.4v6.77h-4.74v-4.4a.78.78 0 00-.78-.78z"> </path> </svg> </div> <span class="nearMe360Text">Falscher Name, wie z.B. auf <span id="nearMe360Directories"></span></span> </div> <div class="nearMe360Line" id="nearMe360addressDiv"> <div class="nearMe360Svg"> <svg id="nearMe360Svg" width="24" height="32" viewBox="0 0 24 32"> <path d="M11.657 30.39a2.236 2.236 0 01-1.838-.956L2.129 18.37l-.114-.169-.083-.123a1.064 1.064 0 01-.07-.08A11.652 11.652 0 019.201.266a11.651 11.651 0 0112.236 17.732l-.054.085-.044.06-.165.227-.027.035-7.67 11.026a2.236 2.236 0 01-1.83.959h.009zM3.54 16.79l.024.03.141.21.127.182 7.674 11.026a.168.168 0 00.233.041.273.273 0 00.042-.041l7.712-11.085a6.64 6.64 0 01.192-.26l.027-.044A9.59 9.59 0 009.636 2.284 9.589 9.589 0 003.54 16.79zm8.11.322a5.459 5.459 0 115.462-5.447 5.464 5.464 0 01-5.461 5.447zm0-8.852a3.393 3.393 0 10.007 6.786 3.393 3.393 0 00-.006-6.786z"> </path> </svg> </div> <span class="nearMe360Text">Falsche Adresse, wie z.B. auf <span id="nearMe360Directories"></span></span> </div> <div class="nearMe360Line" id="nearMe360phoneDiv"> <div class="nearMe360Svg"> <svg id="nearMe360Svg" width="24" height="26" viewBox="0 0 24 26"> <path d="M24 19.85v-.03c-.1-.63-.8-1.46-2.13-2.51a27.02 27.02 0 00-3.97-2.62l-.16-.05c-.95-.25-2.3.43-3.28.94l-.12.06-.13.06a80.14 80.14 0 01-5.02-5.76c.05-.05.1-.1.13-.16.71-1.02 1.78-2.58 1.23-3.9-.2-.46-.83-1.66-1.55-2.92-.47-.84-.98-1.66-1.54-2.44L7.11.26 7.02.22C6.7.1 6.36.02 6.02 0a6.3 6.3 0 00-3.65 1.19 6.2 6.2 0 00-2.22 2.5c-.07.2-.12.4-.14.62-.16 2.63 1.07 5.78 3.67 9.38a59.8 59.8 0 006.4 7.22l.04.04a31.94 31.94 0 003.77 2.89 10.4 10.4 0 004.7 1.67h.12c.94 0 2.16-.73 3.36-2.04.85-.92 1.86-2.37 1.93-3.42v-.2zM7.62 8.63c-.39.56-.73 1.05-.6 1.6.2.75 2.47 3.35 3.16 4.13 1.38 1.56 3.17 3.44 3.87 3.52h.26c.37-.11.73-.27 1.06-.46a9.15 9.15 0 011.82-.79 26.9 26.9 0 013.4 2.3c.48.34.93.74 1.33 1.18-.33.73-.8 1.4-1.36 1.96-.95 1.04-1.62 1.4-1.83 1.4a8.13 8.13 0 01-3.76-1.37c-1.23-.8-2.4-1.7-3.49-2.67a58.12 58.12 0 01-6.15-6.94c-2.3-3.21-3.4-5.92-3.26-8.05a4.11 4.11 0 011.46-1.57 4.18 4.18 0 012.23-.83h.12l.18.02c.26.39.66 1.06 1.15 1.9a36.65 36.65 0 011.44 2.7c.04.12-.04.53-1.03 1.97z"> </path> </svg> </div> <span class="nearMe360Text">Fehlende Telefonnummer, wie z.B. auf <span id="nearMe360Directories"></span></span> </div> <div class="nearMe360Line" id="nearMe360websiteDiv"> <div class="nearMe360Svg"> <svg id="nearMe360Svg" width="25" height="21" viewBox="0 0 25 21"> <path d="M3.77 2a.75.75 0 00-.77.76.77.77 0 00.77.77.75.75 0 00.77-.73v-.04A.75.75 0 003.8 2h-.03zM5.94 2a.75.75 0 00-.77.74v.02a.77.77 0 101.33-.53.75.75 0 00-.53-.23h-.03zM8.23 2a.75.75 0 00-.77.74v.02a.77.77 0 101.33-.53.75.75 0 00-.53-.23h-.03z"> </path> <path d="M24.07 20.64H.8a.8.8 0 01-.8-.8V.8A.8.8 0 01.8 0h23.27a.8.8 0 01.8.8v19.04a.8.8 0 01-.8.8zm-22.48-1.6h21.68V1.6H1.6v17.46z"> </path> <path d="M23.49 7H.91a.87.87 0 01-.64-.3A1.05 1.05 0 010 6c0-.27.1-.52.27-.7.17-.2.4-.3.64-.3h22.58c.24 0 .47.1.64.3a1.05 1.05 0 010 1.41c-.17.18-.4.29-.64.29z"> </path> </svg> </div> <span class="nearMe360Text">Fehlende Webseite, wie z.B. auf <span id="nearMe360Directories"></span></span> </div> <div class="nearMe360Line" id="nearMe360openingHoursDiv"> <div class="nearMe360Svg"> <svg id="nearMe360Svg" width="25" height="25" viewBox="0 0 25 25"> <path d="M13.16 6.12a1.06 1.06 0 00-1.03 1.03v5.95l-2.41 2.24a.98.98 0 00-.13 1.4c.2.2.48.33.77.33a.92.92 0 00.66-.27l2.75-2.52a.86.86 0 00.36-.7V7.14a1.04 1.04 0 00-.97-1.03z"> </path> <path d="M12.5 0a12.5 12.5 0 100 25 12.5 12.5 0 000-25zm0 23.24a10.74 10.74 0 110-21.48 10.74 10.74 0 010 21.48z"> </path> </svg> </div> <span class="nearMe360Text">Fehlende √ñffnungszeiten, wie z.B. auf <span id="nearMe360Directories"></span></span> </div> <div class="nearMe360Line" id="nearMe360photosDiv"> <div class="nearMe360Svg"> <svg id="nearMe360Svg" width="25" height="20" viewBox="0 0 25 20"> <path d="M9.092 0a.908.908 0 00-.765.47L7.14 2.84H2.55A2.57 2.57 0 000 5.391v11.37a2.57 2.57 0 002.55 2.55h19.892a2.57 2.57 0 002.55-2.55V5.395a2.571 2.571 0 00-2.55-2.55h-4.59L16.66.474a.872.872 0 00-.765-.469L9.092 0zm.53 1.704h5.753l1.202 2.376a.872.872 0 00.765.47h5.1a.834.834 0 01.852.851v11.36a.831.831 0 01-.852.851H2.55a.835.835 0 01-.854-.852V5.396a.834.834 0 01.854-.851h5.1a.872.872 0 00.766-.47l1.206-2.371zm2.874 3.692a5.399 5.399 0 105.402 5.4 5.412 5.412 0 00-5.402-5.4zm0 1.706a3.693 3.693 0 11-3.69 3.693 3.68 3.68 0 013.69-3.693z"> </path> </svg> </div> <span class="nearMe360Text">Fehlende Fotos, wie z.B. auf <span id="nearMe360Directories"></span></span> </div> </div> <div id="ubtable"> <span id="resultsListText"></span> <hr> <div id="resultsList"> <div id="result"> <div class="portaldiv"> <a id="listingurl" target="_blank"> <img draggable="false" src="" id="portal_img"> </a> <span id="portal_name">-</span> </div> <div class="infos"> <span id="name">-</span> <div id="details"> <span id="street">-, -</span> <span id="number">-</span> <a id="website" target="_blank">-/</a> </div> </div> <div class="svgdiv"> <div id=timesInfo></div> <svg id="times" viewbox="0 0 800 400"> <path d="M48.1,35.3h3.2c0.9,0,1.6,0.7,1.6,1.6c0,0,0,0,0,0v14c0,0.4-0.2,0.8-0.4,1.2l-9,9c-0.6,0.6-1.6,0.6-2.2,0 l-2.2-2.2c-0.6-0.6-0.6-1.6,0-2.2l7.5-7.6V37c-0.1-0.8,0.5-1.6,1.4-1.7C48,35.3,48,35.3,48.1,35.3z" /> <path d="m256 8c-137 0-248 111-248 248s111 248 248 248 248-111 248-248-111-248-248-248zm92.49 313-20 25a16 16 0 0 1 -22.49 2.5l-67-49.72a40 40 0 0 1 -15-31.23v-155.55a16 16 0 0 1 16-16h32a16 16 0 0 1 16 16v144l58 42.5a16 16 0 0 1 2.49 22.5z" /> </svg> </div> <div class="svgdiv"> <svg id="photos" viewbox="0 0 700 400"> <path d="M308.1,277.95c0,35.7-28.9,64.6-64.6,64.6s-64.6-28.9-64.6-64.6s28.9-64.6,64.6-64.6S308.1,242.25,308.1,277.95z M440.3,116.05c25.8,0,46.7,20.9,46.7,46.7v122.4v103.8c0,27.5-22.3,49.8-49.8,49.8H49.8c-27.5,0-49.8-22.3-49.8-49.8v-103.9 v-122.3l0,0c0-25.8,20.9-46.7,46.7-46.7h93.4l4.4-18.6c6.7-28.8,32.4-49.2,62-49.2h74.1c29.6,0,55.3,20.4,62,49.2l4.3,18.6H440.3z M97.4,183.45c0-12.9-10.5-23.4-23.4-23.4c-13,0-23.5,10.5-23.5,23.4s10.5,23.4,23.4,23.4C86.9,206.95,97.4,196.45,97.4,183.45z M358.7,277.95c0-63.6-51.6-115.2-115.2-115.2s-115.2,51.6-115.2,115.2s51.6,115.2,115.2,115.2S358.7,341.55,358.7,277.95z" /> </svg> </div> </div> </div> </div> </div> <div id="ubgridwrap"> <div id="ubgridcaption"></div> <div id="ubgrid"> </div> </div> </div> </div>',element=getElements(e),await loadGoogleAPI(),await loadChartJS(),await loadUberall(),await loadTextsAndAttributes(),actualizeDirectoryGrid(),actualizeChart(),toggleResults(!1),element.ubwrap&&(element.ubwrap.style.visibility="visible"),initParams()}}async function loadGoogleAPI(e="AIzaSyBG4_LC89Zr2-Ut2Jk1GQv8N3027L2R6w0"){return"string"==typeof window.location.href&&window.location.href.includes("127.0")&&(e=atob("QUl6YVN5Q3cwMVVkeHBPMjBpYUNHYTVxb2xycWJFRlVjVVQ2U3Jn")),await new Promise(((t,i)=>{const n=document.createElement("script");n.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places&loading=async`,n.onload=function(){t(!0)},n.onerror=function(){t(!1)},document.head.appendChild(n)}))}async function loadChartJS(){return await new Promise(((e,t)=>{const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/chart.js",i.onload=function(){e(!0)},i.onerror=function(){e(!1)},document.head.appendChild(i)}))}async function loadUberall(){return await new Promise(((e,t)=>{const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/gh/gokhan-akin/xact-ext-settings@latest/uberall.js",i.onload=function(){e(!0)},i.onerror=function(){e(!1)},document.head.appendChild(i)}))}async function loadStatusCheckMessages(e,t="de"){return await new Promise(((i,n)=>{const r=document.querySelector("head");fetch(`https://uberall.com/${t}/home/statusCheckMessages?public_key=${e}`).then((e=>e.text())).then((e=>{e.match(/(?<=<script>|<script\stype=["']text\/javascript["']>)[\s\S\r\n]*?(?=<\/script>)/gim).forEach((e=>{const t=document.createElement("script");t.type="text/javascript",t.text=e.replaceAll("\\u002f","/"),r.appendChild(t)})),i(!0)})).catch((e=>{console.log("Err fetching statusCheckMessages:",e),i(!1)}))}))}async function loadTextsAndAttributes(){if(statusCheckMessages||void 0===attribute.key||await loadStatusCheckMessages(attribute.key),statusCheckMessages){if(element.qualityText&&(element.qualityText.innerHTML=`${statusCheckMessages["top.box.chart.explanation"]} <span id="totalPortals">-</span> ${statusCheckMessages["top.box.chart.explanation.2"]}`,element.totalPortals=document.querySelector("#totalPortals")),element.copyLink){let e=element.copyLink.querySelector("span");e&&(e.innerHTML=statusCheckMessages["share.link"])}if(element.pdfExport){let e=element.pdfExport.querySelector("span");e&&(e.innerHTML=statusCheckMessages["download.pdf.link"])}if(element.queryCaptionText&&(element.queryCaptionText.innerHTML=statusCheckMessages["results.header"]),element.resultsListText&&(element.resultsListText.innerHTML=statusCheckMessages["results.table.header"]),element.ubgridcaption&&(element.ubgridcaption.innerHTML=statusCheckMessages["directory.grid.title"]),element.button&&(element.button.innerHTML=statusCheckMessages["search.label.submit"]),element.ubzip){let e=element.ubzip.parentElement.querySelector("label");e&&(e.innerHTML=statusCheckMessages["search.label.zip"])}if(element.ubcountry){let e=element.ubcountry.parentElement.querySelector("label");e&&(e.innerHTML=statusCheckMessages["search.label.country"])}if(element.ubname){let e=element.ubname.parentElement.querySelector("label");e&&(e.innerHTML=statusCheckMessages["search.label.name"])}if(element.ubstreet){let e=element.ubstreet.parentElement.querySelector("label");e&&(e.innerHTML=statusCheckMessages["search.label.street"])}if(attribute.hasOwnProperty("directories")&&(attribute.directories=attribute.directories.split(",")),element.ubcountry&&attribute.countries){let e=attribute.countries.split(",");countryDropdownData&&e.forEach((e=>{if(countryDropdownData[e]){let t=document.createElement("option");t.value=e,t.textContent=countryDropdownData[e].name,element.ubcountry.appendChild(t)}}))}element.button&&(attribute.hasOwnProperty("buttonbgcolor")&&attribute.buttonbgcolor.length&&(element.button.style.backgroundColor=attribute.buttonbgcolor),attribute.hasOwnProperty("buttontextcolor")&&attribute.buttontextcolor.length&&(element.button.style.color=attribute.buttontextcolor)),element.form&&attribute.hasOwnProperty("bgcolor")&&attribute.bgcolor.length&&(element.form.style.backgroundColor=attribute.bgcolor),element.headertext&&attribute.hasOwnProperty("headertext")&&attribute.headertext.length&&(element.headertext.textContent=attribute.headertext),element.ctatext&&attribute.hasOwnProperty("ctatext")&&(element.ctatext.textContent=attribute.ctatext),element.ctabutton&&attribute.hasOwnProperty("ctabuttontext")&&(element.ctabutton.textContent=attribute.ctabuttontext),element.ctalink&&attribute.hasOwnProperty("ctalink")&&(element.ctalink.href=attribute.ctalink),element.allLinks&&attribute.hasOwnProperty("linkcolor")&&attribute.linkcolor.length&&element.allLinks.forEach((e=>{e.style.color=attribute.linkcolor})),element.allTexts&&attribute.hasOwnProperty("textcolor")&&attribute.textcolor.length&&element.allTexts.forEach((e=>{e.style.color=attribute.textcolor})),element.ubtable&&(attribute.hasOwnProperty("showtable")&&"true"!=attribute.showtable?element.ubtable.style.display="none":element.ubtable.style.removeProperty("display")),element.pdfExport&&attribute.hasOwnProperty("pdfexport")&&"true"!=attribute.pdfexport&&(element.pdfExport.style.display="none"),element.copyLink&&attribute.hasOwnProperty("sharelink")&&"true"!=attribute.sharelink&&(element.copyLink.style.display="none"),attribute.paddingtop&&"string"==typeof attribute.paddingtop&&(widget.style.paddingTop=widget.style.paddingTop),element.queryLine&&(element.queryLine.removeEventListener("click",(function(e){})),element.queryLine.addEventListener("click",(function(e){toggleForm()}))),element.copyLink&&(element.copyLink.removeEventListener("click",(function(e){})),element.copyLink.addEventListener("click",(function(e){let t=element.copyLink.innerHTML;element.copyLink.hasAttribute("url")&&navigator.clipboard.writeText(element.copyLink.getAttribute("url")).then((()=>{let e=element.copyLink.querySelector("span");e&&(e.innerHTML=statusCheckMessages["share.link.copy.success"]),element.copyLink.disabled=!0,setTimeout((()=>{element.copyLink.innerHTML=t,element.copyLink.disabled=!1}),1e3)}))}))),element.ubcountry.addEventListener("change",(function(e){actualizeDirectoryGrid()})),element.ubname&&element.ubstreet&&element.ubzip&&[element.ubname,element.ubstreet,element.ubzip].forEach((function(e){e.removeEventListener("keydown",(function(e){})),e.addEventListener("keydown",(function(e){13===e.keyCode&&element.button&&!element.button.getAttribute("disabled")&&element.button.click()}))})),element.skipSvg&&element.skipSvg.addEventListener("click",(function(e){element.skipSvg.hasAttribute("disabled")||processResults()})),element.predictionInput.addEventListener("input",(()=>{predictionTimer&&clearTimeout(predictionTimer);const e=element.predictionInput.value;e.length>5?predictionTimer=setTimeout((()=>{fetchPredictions(e)}),500):element.predictionList.innerHTML=""})),document.addEventListener("click",(function(e){let t=document.querySelector(":focus");t&&(/prediction|prediction/gi.test(t.id)||!e.target||/prediction|prediction/gi.test(e.target.id))||(displayPredictions(null,null),element.predictionInput&&(element.predictionInput.value=""))}))}}function fetchPredictions(e){if("undefined"==typeof google)return;(new google.maps.places.AutocompleteService).getPlacePredictions({input:e},displayPredictions)}function predictionOnClick(e,t,i,n,r){element.ubname&&element.ubstreet&&element.ubzip&&element.ubcountry&&(element.ubname.value=t,element.ubstreet.value=i,element.ubzip.value=n,element.ubcountry.value=r)}function getComponent(e,t,i=!1){return i?e.find((e=>e.types.includes(t)))?.short_name||"":e.find((e=>e.types.includes(t)))?.long_name||""}function displayPredictions(e,t){if(element.predictionList.innerHTML="","undefined"==typeof google||t!==google.maps.places.PlacesServiceStatus.OK||!e)return;const i=new google.maps.places.PlacesService(document.createElement("div"));e.forEach((e=>{i.getDetails({placeId:e.place_id,fields:["name","address_components"]},(function(t,i){if(i===google.maps.places.PlacesServiceStatus.OK){const i=document.createElement("div");i.id="predictionEntry";const n=t.address_components,r=getComponent(n,"street_number"),a=getComponent(n,"route")+(r&&r.length?" "+r:""),o=getComponent(n,"postal_code"),s=getComponent(n,"country",!0),l=t.name;let c=`${l}, ${a}, ${s}-${o}`;e.matched_substrings.forEach((t=>{let i=e.description.substr(t.offset,t.length),n=c.toLowerCase().indexOf(i.toLowerCase());n>-1&&(c=c.substring(0,n)+"<b>"+c.substring(n,n+t.length)+"</b>"+c.substring(n+i.length))})),i.innerHTML=c,i.addEventListener("click",(function(e){predictionOnClick(e,l,a,o,s)})),element.predictionList.appendChild(i)}}))}))}async function initParams(){let e=getParams();if(e.nearme360){let e=document.querySelector("div#ubnearme360");e&&(e.style.display="block")}if(e.ubrecheckid&&e.ubrechecktoken){let t=await uberall.getRecheckInfo({recheckid:e.ubrecheckid,rechecktoken:e.ubrechecktoken});t&&(e.ubname=t.name,e.ubstreet=`${t.street} ${t.streetNo}`,e.ubzip=t.zip,e.ubcountry=t.country,e.ubcity=t.city)}element.ubname&&element.ubstreet&&element.ubzip&&element.ubcountry&&(element.ubcountry.value=e.ubcountry??"DE",element.ubname.value=e.ubname??"",element.ubstreet.value=e.ubstreet??"",element.ubzip.value=e.ubzip??""),(e.ubrecheckid&&e.ubrechecktoken||"true"==e.autostart)&&searchInit(e)}async function generatePDF(e,t=!0){let i,n={token:element.pdfExport.getAttribute("token")??element.pdfExport.getAttribute("ubrechecktoken")??element.pdfExport.getAttribute("rechecktoken"),showgraph:"true"==(element.widget.getAttribute("data-showgraph")??!0),bgcolor:element.widget.getAttribute("data-bgcolor")??"#27435c",contactphone:element.widget.getAttribute("data-contactphone")??"",contactemail:element.widget.getAttribute("data-contactemail")??"",headertext:element.widget.getAttribute("data-headertext")??"Testen Sie Ihre Auffindbarkeit",language:element.widget.getAttribute("data-language")??"de",public_key:element.widget.getAttribute("data-key")??void 0};if(console.log(n),t)i=await uberall.pdfExport(n.token,void 0,n.public_key,n.showgraph,"#27435c",n.contactphone,n.contactemail,n.headertext,n.language);else{let t=await fetch("http://localhost:3000/pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();i=n.link??n.url}return i}function pdfExportInit(){if(!element.pdfExport)return null;let e=element.pdfExport.innerHTML;element.pdfExport.disabled=!0;let t=element.pdfExport.querySelector("span");function i(){element.pdfExport.innerHTML=e,element.pdfExport.disabled=!1}t&&(t.innerHTML=statusCheckMessages["download.pdf.in.progress"]),generatePDF(window.lastSearchData).then((e=>{const t=document.createElement("a");t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t),i()})).catch((e=>{console.log("Error PDF Export:",e),i()}))}function searchInit(e=null){delete window.lastSearchData,toggleButton(!1),toggleResults(!1),element.copyLink&&element.copyLink.removeAttribute("url"),element.pdfExport&&(element.pdfExport.removeAttribute("recheckid"),element.pdfExport.removeAttribute("token"));let t={infoTextSize:14,boolTickSize:18,directoryLogoSize:32,country:element.ubcountry.value,public_key:attribute.key,name:element.ubname.value,street:element.ubstreet.value,zip:element.ubzip.value,city:"",directories:attribute.directories,callback:function(t){let i=document.querySelector("#myBar");if(i&&(i.style.width=t.dirDone/t.dirTotal*100+"%"),t.dirDone>=t.dirTotal/2&&element.skipSvg.removeAttribute("disabled"),window.lastSearchData||(window.lastSearchData=t),window.lastSearchData.list||(window.lastSearchData.list=[]),window.lastSearchData.list.push(t.result),window.lastSearchData.hasOwnProperty("searchData")||(window.lastSearchData.searchData=e),1==t.dirDone){if(toggleLoadingModal(!0),element.searchQuery&&(element.searchQuery.textContent=`${t.searchData.name}, ${t.searchData.streetAndNo??t.searchData.street+" "+t.searchData.streetNo}, ${t.searchData.zip}, ${t.searchData.country}`),setParams({ubname:t.searchData.name,ubstreet:`${t.searchData.street} ${t.searchData.streetNo}`,ubzip:t.searchData.zip,ubcountry:t.searchData.country,ubcity:t.searchData.city}),element.copyLink){let e=`${window.location.href.split("?")[0]}?ubrecheckid=${t.searchData.id}&ubrechecktoken=${t.searchData.token}`;element.copyLink.setAttribute("url",e)}element.pdfExport&&(element.pdfExport.setAttribute("recheckid",t.searchData.id),element.pdfExport.setAttribute("token",t.searchData.token))}t.finished&&(window.lastSearchData=t)}};e&&(e.hasOwnProperty("ubrechecktoken")&&(t.token=e.ubrechecktoken),e.hasOwnProperty("ubrecheckid")&&(t.id=e.ubrecheckid),e.hasOwnProperty("ubcountry")&&(t.country=e.ubcountry),e.hasOwnProperty("ubzip")&&(t.zip=e.ubzip),e.hasOwnProperty("ubcity")&&(t.city=e.ubcity),e.hasOwnProperty("ubname")&&(t.name=e.ubname),e.hasOwnProperty("ubstreet")&&(t.street=e.ubstreet)),uberall.fullCheck(t).then((e=>{e.hasOwnProperty("searchData")||(e.searchData=t),processResults(e)})).catch((e=>{toggleErrorModal(e),toggleButton(!0)}))}function processResults(e=window.lastSearchData.list){if(e)if(e.lang||(e.lang="DE"),toggleLoadingModal(!1),toggleButton(!0),e.status)"INVALID_PARAMETER"==e.status?(toggleErrorModal(statusCheckMessages["normalization.error"],!0),toggleForm(!0),toggleResults(!1)):(toggleErrorModal("Fehler: "+(e.message??e.status),!0),toggleForm(!0),toggleResults(!1));else{let t={incorrect:0,correct:0,missing:0,get total(){return this.incorrect+this.correct+this.missing}},i=!1,n=null,r=window.lastSearchData.searchData,a=(document.querySelector("#result"),'<div class="portaldiv"> <a id="listingurl" target="_blank"><img draggable="false" src="" id="portal_img"> </a> <span id="portal_name">-</span> </div> <div class="infos"> <span id="name">-</span> <div id="details"> <span id="street">-, -</span> <span id="number">-</span> <a id="website" target="_blank">-/</a> </div> </div> <div class="svgdiv"><div id=timesInfo></div><svg id="times" viewbox="0 0 800 400"> <path d="M48.1,35.3h3.2c0.9,0,1.6,0.7,1.6,1.6c0,0,0,0,0,0v14c0,0.4-0.2,0.8-0.4,1.2l-9,9c-0.6,0.6-1.6,0.6-2.2,0 l-2.2-2.2c-0.6-0.6-0.6-1.6,0-2.2l7.5-7.6V37c-0.1-0.8,0.5-1.6,1.4-1.7C48,35.3,48,35.3,48.1,35.3z" /> <path d="m256 8c-137 0-248 111-248 248s111 248 248 248 248-111 248-248-111-248-248-248zm92.49 313-20 25a16 16 0 0 1 -22.49 2.5l-67-49.72a40 40 0 0 1 -15-31.23v-155.55a16 16 0 0 1 16-16h32a16 16 0 0 1 16 16v144l58 42.5a16 16 0 0 1 2.49 22.5z" /> </svg> </div> <div class="svgdiv"><svg id="photos" viewbox="0 0 700 400"> <path d="M308.1,277.95c0,35.7-28.9,64.6-64.6,64.6s-64.6-28.9-64.6-64.6s28.9-64.6,64.6-64.6S308.1,242.25,308.1,277.95z M440.3,116.05c25.8,0,46.7,20.9,46.7,46.7v122.4v103.8c0,27.5-22.3,49.8-49.8,49.8H49.8c-27.5,0-49.8-22.3-49.8-49.8v-103.9 v-122.3l0,0c0-25.8,20.9-46.7,46.7-46.7h93.4l4.4-18.6c6.7-28.8,32.4-49.2,62-49.2h74.1c29.6,0,55.3,20.4,62,49.2l4.3,18.6H440.3z M97.4,183.45c0-12.9-10.5-23.4-23.4-23.4c-13,0-23.5,10.5-23.5,23.4s10.5,23.4,23.4,23.4C86.9,206.95,97.4,196.45,97.4,183.45z M358.7,277.95c0-63.6-51.6-115.2-115.2-115.2s-115.2,51.6-115.2,115.2s51.6,115.2,115.2,115.2S358.7,341.55,358.7,277.95z" /> </svg></div>'),o={dataFields:{address:{correct:{count:0,directoriesToDisplay:[]},missing:{count:0,directoriesToDisplay:[]},inaccurate:{count:0,directoriesToDisplay:[]}},name:{correct:{count:0,directoriesToDisplay:[]},missing:{count:0,directoriesToDisplay:[]},inaccurate:{count:0,directoriesToDisplay:[]}},website:{missing:{count:0,directoriesToDisplay:[]},present:{count:0,directoriesToDisplay:[]}},phone:{missing:{count:0,directoriesToDisplay:[]},present:{count:0,directoriesToDisplay:[]}},openingHours:{missing:{count:0,directoriesToDisplay:[]},present:{count:0,directoriesToDisplay:[]}},photos:{missing:{count:0,directoriesToDisplay:[]},present:{count:0,directoriesToDisplay:[]}}},listings:{missing:{count:0,percentageOfTotal:0,directoriesToDisplay:[]},inaccurate:{count:0,percentageOfTotal:0,directoriesToDisplay:[]},correct:{count:0,percentageOfTotal:0,directoriesToDisplay:[]}}};element.resultsList&&(element.resultsList.innerHTML="");for(const s in uberall.directoryType){let l=e.filter((e=>e.response.result.directoryType===s)),c=Array.isArray(l)?l[0]:l;if(c&&"TECHNICAL_PROBLEMS"!=c.response.result.syncStatus){let e=c.response.result,l=document.createElement("div");if(l.id="result",l.innerHTML=a,"MISSING"!=e.nameStatus)for(let t in o.dataFields){let i=e[("address"==t?"street":t)+"Status"].toLowerCase();"mismatch"==i?i="inaccurate":"match"==i&&(i="correct"),o.dataFields[t].hasOwnProperty(i)&&(o.dataFields[t][i].count++,o.dataFields[t][i].directoriesToDisplay.push(e.directoryType))}const d={portal_img:l.querySelector("#portal_img"),portal_name:l.querySelector("#portal_name"),listingurl:l.querySelector("#listingurl"),name:l.querySelector("#name"),number:l.querySelector("#number"),street:l.querySelector("#street"),website:l.querySelector("#website"),times:l.querySelector("#times"),photos:l.querySelector("#photos"),details:l.querySelector("#details"),timesInfo:l.querySelector("#timesInfo"),infos:l.querySelector(".infos")};let u={PRESENT:"https://static-prod.uberall.com/assets/statusCheck/present.svg",MISSING:"https://static-prod.uberall.com/assets/statusCheck/missing.svg",NOT_APPLICABLE:"https://static-prod.uberall.com/assets/statusCheck/not_available.svg"};if("undefined"!=typeof availabilityIcons)for(const e in u)availabilityIcons.hasOwnProperty(e)||(availabilityIcons[e]=u[e]),u.hasOwnProperty(e)||(u[e]=availabilityIcons[e]);if(d.portal_name&&(d.portal_name.textContent=uberall.directoryType[s].name),"SUCCESS"==c.status){if(!c.response.alreadyManaged&&!c.response.managedLocation||(c.response.alreadyManaged=!0),void 0!==c.response.result.attribution&&null!=c.response.result.attribution&&/movido|aadvanto|spectario/gi.test(c.response.result.attribution.name)&&void 0!==r){let e=c.response.result.name.replace(/[^a-z0-9]/gi,""),t=r.name.replace(/[^a-z0-9]/gi,"");(e.includes(t)||t.includes(e))&&c.response.result.zip==r.zip&&(c.response.alreadyManaged=!0)}c.response.result.attribution&&(n=c.response.result.attribution.name)}if(i||(i=c.response.alreadyManaged),i){if(d.infos){let e=`${n?n+":<br>":""}${statusCheckMessages["top.box.already.managed"]}`;d.infos.innerHTML=e,d.infos.classList.add("managed"),l.classList.add("managed"),l.querySelectorAll(".svgdiv").forEach((e=>{e.remove()}));let i=l.querySelector("#portal_img");i&&(i.src="https://static-prod.uberall.com/assets/statusCheck/safeguard_active.svg"),document.querySelectorAll("#result").forEach((i=>{let n=i.querySelector(".infos"),r=i.querySelector("#portal_img");r&&(r.src="https://static-prod.uberall.com/assets/statusCheck/safeguard_active.svg"),n.innerHTML=e,n.classList.add("managed"),i.classList.add("managed"),i.querySelectorAll(".svgdiv").forEach((e=>{e.remove()})),t.correct=100,t.incorrect=0,t.missing=0}))}}else{if(d.portal_img&&(d.portal_img.src=c.html.logo),d.times&&(/svg/i.test(d.times.tagName)?d.times.classList.add(CLASSNAME[e.openingHoursStatus]??""):d.times.src=u[e.openingHoursStatus],"PRESENT"==e.openingHoursStatus&&e.openingHours.length>0)){d.times.addEventListener("mouseenter",(function(e){d.timesInfo.style.display="flex"})),d.times.addEventListener("mouseleave",(function(e){fadeOut(d.timesInfo)}));let t=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],i=d.timesInfo;for(let n=0;n<7;n++){let r=e.openingHours.filter((e=>e.dayOfWeek==n+1&&!e.hasOwnProperty("closed"))),a=`<b>${t[n]}:</b> Geschlossen`,o=CLASSNAME.MISSING;r.length>0&&(o=CLASSNAME.PRESENT,a=`<b>${t[n]}:</b> ${r[0].from1} - ${r[0].to1}`,r[0].hasOwnProperty("from2")&&r[0].hasOwnProperty("to2")&&(a+=` | ${r[0].from2} - ${r[0].to2}`));let s=`<div id="timeLine">\n\t\t\t\t\t\t\t\t\t\t<svg class="${o}" style=width:20px;height:20px; viewBox="0 0 490 490"><path d="M245 0C109.5 0 0 109.5 0 245s109.5 245 245 245 245-109.5 245-245S380.5 0 245 0zm0 449.3c-112.6 0-204.3-91.7-204.3-204.3S132.4 40.7 245 40.7 449.3 132.4 449.3 245 357.6 449.3 245 449.3z"/><path d="M290.9 224.1h-25v-95.9c0-11.5-9.4-20.9-20.9-20.9s-20.9 9.4-20.9 20.9V245c0 11.5 9.4 20.9 20.9 20.9h45.9c11.5 0 20.9-9.4 20.9-20.9s-9.5-20.9-20.9-20.9z"/></svg>\n\t\t\t\t\t\t\t\t\t\t<span>${a}</span>\n\t\t\t\t\t\t\t\t\t</div>`;i.innerHTML+=s}}if(d.photos&&(/svg/i.test(d.photos.tagName)?d.photos.classList.add(CLASSNAME[e.photosStatus]??""):d.photos.src=u[e.photosStatus]),e.name){if(d.listingurl&&(d.listingurl.href=e.listingUrl),d.name&&(d.name.innerHTML=`<span class="${"MISMATCH"==e.nameStatus?CLASSNAME.MISMATCH:""}">${e.name}</span>`),d.street){let t;switch(e.streetAndNoStatus){case"MISSING":t=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["address.fields.missing"]}</span>`;break;case"MISMATCH":t=`<span class="${CLASSNAME.MISMATCH}">${e.streetAndNo}</span>`;break;case"MATCH":case"PRESENT":t=e.streetAndNo;break;default:t="-"}if(e.city)switch(t+=", ",e.cityStatus){case"MISSING":t+=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["city.error"]}</span>`;break;case"MISMATCH":t+=`<span class="${CLASSNAME.MISMATCH}">${e.city}</span>`;break;case"MATCH":case"PRESENT":t+=e.city}d.street.innerHTML=t}if(d.number){let t="";switch(e.phoneStatus){case"MISSING":t=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["phone.missing"]}</span>`;break;case"MISMATCH":t=`<span class="${CLASSNAME.MISMATCH}">${e.phone}</span>`;break;case"MATCH":case"PRESENT":t=`<span class="${CLASSNAME.PRESENT}">${e.phone}</span>`;break;case"NOT_APPLICABLE":t=`<span class="${CLASSNAME.NOT_APPLICABLE}">${statusCheckMessages["phone.not.applicable"]}</span>`}d.number.innerHTML=t}if(d.website){let t="";switch(e.websiteStatus){case"MISSING":t=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["website.missing"]}</span>`;break;case"MISMATCH":t=`<span class="${CLASSNAME.MISMATCH}">${e.website}</span>`;break;case"MATCH":case"PRESENT":t=`<span class="${CLASSNAME.PRESENT}">${e.website}</span>`;break;case"NOT_APPLICABLE":t=`<span class="${CLASSNAME.NOT_APPLICABLE}">${statusCheckMessages["website.not.applicable"]}</span>`}d.website.innerHTML=t}e.website&&(d.website.href=e.website),"MATCH"==e.nameStatus&&"MATCH"==e.streetAndNoStatus&&"MISMATCH"!=e.cityStatus&&"MISSING"!=e.cityStatus&&"MISSING"!=e.openingHoursStatus&&"MISSING"!=e.photosStatus&&"MISSING"!=e.websiteStatus&&"MISSING"!=e.phoneStatus?(t.correct++,o.listings.correct.directoriesToDisplay.push(e.directoryType)):(t.incorrect++,o.listings.inaccurate.directoriesToDisplay.push(e.directoryType))}else o.listings.missing.directoriesToDisplay.push(e.directoryType),t.missing++,d.name&&(d.name.innerHTML=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["listing.not.found"]}</span>`),d.times&&(d.times.style.display="none"),d.photos&&(d.photos.style.display="none"),d.details&&("boolean"==typeof DESCRIPTION_FOR_MISSING_PORTALS&&1==DESCRIPTION_FOR_MISSING_PORTALS&&uberall.directoryType[s].description?(d.details.classList.add("description"),d.details.innerHTML=uberall.directoryType[s].description):(d.details.innerHTML="",d.details.remove())),l.classList.add("noentry")}element.resultsList.append(l);let p=document.querySelector("#totalPortals");p&&(p.innerHTML=element.resultsList.childElementCount);for(let e in o.dataFields)if(o.dataFields[e],o.dataFields[e].hasOwnProperty("count"))o.dataFields[e].count=o.dataFields[e].directoriesToDisplay.length;else for(let t in o.dataFields[e])o.dataFields[e][t].hasOwnProperty("count")&&(o.dataFields[e][t].count=o.dataFields[e][t].directoriesToDisplay.length);for(let e in o.listings)o.listings[e].hasOwnProperty("count")&&(o.listings[e].count=o.listings[e].directoriesToDisplay.length,o.listings[e].percentageOfTotal=t["inaccurate"==e?"incorrect":e]/t.total*100);for(const e in o.dataFields){let t=document.querySelector(`#nearMe360${e}Div`);if(t){let i=o.dataFields[e].hasOwnProperty("inaccurate")?"inaccurate":"missing";if(o.dataFields[e][i].directoriesToDisplay.length){let n=o.dataFields[e][i].directoriesToDisplay,r=uberall.directoryType[n[0]].name;n.length>1&&(r+=(n.length>2?", ":" & ")+uberall.directoryType[n[1]].name,n.length>2&&(r+=" & "+uberall.directoryType[n[2]].name)),t.querySelector("#nearMe360Directories").innerHTML=r,t.removeAttribute("style")}else t.style.display="none"}}}}console.log("NEARME360",o),toggleForm(!1),toggleResults(!0),actualizeChart(t.missing,t.incorrect,t.correct)}else toggleErrorModal("No data",!0),toggleForm(!0),toggleResults(!1)}function removeParams(){let e=window.location.href.split("?")[0];window.history.replaceState({},document.title,e)}function getParams(){const e=window.location.search,t={};if(e){e.substring(1).split("&").forEach((e=>{const[i,n]=e.split("=");t[decodeURIComponent(i)]=decodeURIComponent(n)}))}return t}function setParams({ubrecheckid:e,ubrechecktoken:t,ubname:i,ubstreet:n,ubzip:r,ubcountry:a,ubcity:o}){removeParams();let s=window.location.href,l={};e&&t?(l.ubrecheckid=e,l.ubrechecktoken=t):i&&n&&r&&a&&(l.autostart=!0,l.ubcountry=a,l.ubname=i,l.ubstreet=n,l.ubzip=r,l.ubcity=o??"");const c=Object.keys(l).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(l[e])}`)).join("&");s.includes("?")?s+=`&${c}`:s+=`?${c}`,removeParams(),window.history.replaceState({},"",s)}function getElements(e){return element={widget:document.querySelector("div.ub_status_check_widget"),ubwrap:document.querySelector("#ubwrap"),header:e.querySelector("#header"),headertext:e.querySelector("#headertext"),queryInfo:e.querySelector("#queryInfo"),bottominfo:e.querySelector("#bottominfo"),button:e.querySelector("button#ubsend"),form:e.querySelector("#ubformfield"),ubname:e.querySelector("input#ubname"),ubstreet:e.querySelector("input#ubstreet"),ubzip:e.querySelector("input#ubzip"),ubcountry:e.querySelector("select#ubcountry"),allTexts:e.querySelectorAll("p,h1,h2,h3,h4,h5,h6,span,input,select"),allLinks:e.querySelectorAll("a"),ctabutton:document.querySelector("#ctabutton"),ctatext:e.querySelector("#ctatext"),ctalink:e.querySelector("a#ctalink"),graphInfo:e.querySelector("#graphInfo"),graph:e.querySelector("#ubgraph"),ubgridwrap:e.querySelector("#ubgridwrap"),directoryGrid:e.querySelector("#ubgrid"),ubtable:e.querySelector("#ubtable"),topinfo:document.querySelector("#topinfo"),searchQuery:document.querySelector("#searchQuery"),queryLine:document.querySelector("#queryLine"),resultsList:document.querySelector("#resultsList"),result:document.querySelector("#result"),skipSvg:document.querySelector("#skipSvg"),predictionInput:document.querySelector("#prediction"),predictionList:document.querySelector("#predictionList"),copyLink:document.querySelector("#copyLink"),pdfExport:document.querySelector("#pdfExport"),qualityText:document.querySelector("#qualityText"),queryCaptionText:document.querySelector("#queryCaptionText"),resultsListText:document.querySelector("#resultsListText"),ubgridcaption:document.querySelector("#ubgridcaption"),emodal:document.querySelector(".emodal"),lmodal:document.querySelector(".modal"),tableheader:document.querySelector(".table-header")}}function toggleErrorModal(e="Die eingegebene Adresse konnte leider nicht gefunden werden. Bitte √ºberpr√ºfen Sie Ihre Angaben.",t=void 0){console.log("ERROR MODAL TOGGLE");let i=document.querySelector('div[class="error"]'),n=i.querySelector("p");if(i){const r=window.getComputedStyle(i).getPropertyValue("display");n.innerHTML=e,null==t&&(t="none"==r),toggleFlatBack(t),toggleButton(!t),i.style.display=1==t?"flex":"none"}}function toggleFlatBack(e=void 0){let t=document.querySelector('div[class="flatback"]');if(t){const i=window.getComputedStyle(t).getPropertyValue("display");t.style.display=null==e?"none"==i?"flex":"none":1==e?"flex":"none"}}function toggleLoadingModal(e=void 0){let t=document.querySelector('div[class="loading"]');if(t){const i=window.getComputedStyle(t).getPropertyValue("display");null==e&&(e="none"==i),toggleFlatBack(e),t.style.display=1==e?"flex":"none"}}function toggleResults(e=void 0){if(element.queryInfo&&element.header&&element.bottominfo){const t=window.getComputedStyle(element.header).getPropertyValue("display");null==e&&(e="none"==t),e?(element.header.style.display="none",element.bottominfo.style.display="flex",element.queryInfo.style.display="flex",element.bottominfo.style.visibility="visible",element.ubgridwrap.style.display="none",element.topinfo&&attribute.hasOwnProperty("showtopinfo")&&"true"!=attribute.showtopinfo&&(element.topinfo.style.display="none"),actualizeDirectoryGrid(!1)):(element.header.style.display="flex",element.bottominfo.style.display="none",element.queryInfo.style.display="none",element.bottominfo.style.visibility="hidden",element.ubgridwrap.style.display="flex",element.topinfo&&element.topinfo.style.removeProperty("display"),actualizeDirectoryGrid(!0))}}function actualizeDirectoryGrid(e=void 0,t=void 0,i=attribute.directories){if(element.ubgridwrap&&element.directoryGrid){if(element.directoryGrid.innerHTML="",element.ubgridwrap.style.display="none",void 0===e&&element.bottominfo){e="none"==getComputedStyle(element.bottominfo).display}if("string"==typeof i&&(i=i.split(",")),e&&(!attribute.hasOwnProperty("showdirectorygrid")||"false"!=attribute.showdirectorygrid)){t||(t=element.ubcountry?element.ubcountry.value:"DE"),t=t.toLowerCase(),i&&i.length||(i=Object.keys(uberall.directoryType));for(const e of i)if(element.ubgridwrap.style.display="flex",uberall.directoryType[e].countries.includes(t)){let t=document.createElement("div");t.className="gridEntry",t.innerHTML=`<img draggable="false" class="gridEntryLogo" src="${uberall.directoryType[e].logo}"><span class="gridEntryName">${uberall.directoryType[e].name}</span>`,element.directoryGrid.appendChild(t)}}}}function getWidgetAttributes(e){attribute={};for(const t of e.attributes)if(/^data-/i.test(t.name)){let e=t.value;e.length>0&&(/^(true|false)$/i.test(e)&&(e="true"==e),attribute[t.name.replace("data-","")]=t.value)}return attribute}function toggleButton(e=void 0){if(element.button)if(element.button.getAttribute("disabled")||e)element.button.innerHTML="TESTEN",element.button.removeAttribute("disabled"),element.ubcountry.removeAttribute("disabled"),element.ubname.removeAttribute("disabled"),element.ubstreet.removeAttribute("disabled"),element.ubzip.removeAttribute("disabled"),element.form.removeAttribute("disabled"),element.predictionInput.removeAttribute("disabled");else if(!element.button.getAttribute("disabled")||!1===e){const e="https://static.wixstatic.com/media/52c20f_597105a39da247c49701e2cd585687d3~mv2.gif";element.button.innerHTML=`<img title="loading" draggable="false" src="${e}" height="40px" >`,element.button.setAttribute("disabled",!0),element.ubcountry.setAttribute("disabled",!0),element.ubname.setAttribute("disabled",!0),element.ubstreet.setAttribute("disabled",!0),element.ubzip.setAttribute("disabled",!0),element.form.setAttribute("disabled",!0),element.predictionInput.setAttribute("disabled",!0)}}function toggleForm(e=void 0){let t=document.querySelector("#ubformfield"),i=document.querySelector('a[class="ubsc_change-search-data"]');if(t){const n=window.getComputedStyle(t).getPropertyValue("display");null==e&&(e="none"==n),e?(i&&(i.querySelector("span").textContent="schlie√üen"),t.style.display="flex"):(i&&(i.querySelector("span").textContent="STANDORT √ÑNDERN"),fadeOut(t))}}function fadeOut(e,t=10){if(e){let i=t,n=setInterval((()=>{i--,e.style.opacity=i/t,i||(e.style.display="none",e.style.opacity=1,clearInterval(n))}),20)}}function fadeIn(e,t=10){if(e){let i=0,n=setInterval((()=>{i++,e.style.opacity=i/t,i||(e.style.display="initial",e.style.opacity=1,clearInterval(n))}),20)}}function actualizeChart(e=1,t=1,i=1){if(element.graphInfo)if(attribute.hasOwnProperty("showgraph")&&"true"!=attribute.showgraph)element.graphInfo.style.display="none";else{element.graphInfo.style.display="flex";let n=element.graph.querySelector("canvas");if(!n)return null;let r=n.getContext("2d");"undefined"==typeof chart&&"undefined"!=typeof Chart&&(chart=new Chart(r,{type:"doughnut",data:{labels:["0% Falsch","0% Fehlen","0% Korrekt"],datasets:[{label:"",data:[5,5,5],backgroundColor:["rgb(251,176,54)","rgb(232,99,99)","rgb(99,166,99)"],borderColor:"#ffffff88"}]},plugins:[],options:{plugins:{legend:{position:"left",labels:{usePointStyle:!0,boxWidth:30,padding:10,font:{size:14}}}},scales:{}}}),n.style.width="300",n.style.height="300");let a=t+e+i,o={correct:(100/a*i).toFixed(0),missing:(100/a*e).toFixed(0),incorrect:(100/a*t).toFixed(0)},s={labels:[`${o.incorrect}% Falsch`,`${o.missing}% Fehlen`,`${o.correct}% Korrekt`],datasets:[{label:"",data:[t,e,i],backgroundColor:["rgb(251,176,54)","rgb(232,99,99)","rgb(99,166,99)"],borderColor:"#ffffff88"}]};"undefined"!=typeof chart&&(console.log("chart update",chart),chart.data=s,chart.update())}}window.onload=e=>{loadWidget()};