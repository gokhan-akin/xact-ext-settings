const mysiteauditor={check:async function(e,t,o,n){let a="a5eff0aa966887974379287edb9c7b6540923034"==n?"Aadvanto":"ceff67c5eb4bca4063849c4d0454e085243fa041"==n?"Movido":null;const r=Date.now(),c={callback:"jQuery19106226648019322614_"+r,api_key:n,email:t,first_name:"","url[]":[e,"http://"],keyword:o,language:"german",submitted_on:/advanto/gi.test(a)?"https://aadvanto.de/seo-pruefung/":"https://movido-media.de/mein-seo-test/",form:"banner",_:r},s=`https://mysiteauditor.com/user/leads/process_lead/?${Object.keys(c).map((e=>Array.isArray(c[e])?c[e].map((t=>`${e}=${encodeURIComponent(t)}`)).join("&"):`${e}=${encodeURIComponent(c[e])}`)).join("&")}`;try{const e=await fetch(s);if(!e.ok)throw new Error("Network response was not ok");const t=await e.text(),o=t.indexOf("{"),n=t.lastIndexOf("}")+1;return JSON.parse(t.substring(o,n))}catch(e){throw console.error("There was a problem with the fetch operation: ",e),e}},slug:async function(e){const t=String(Math.floor(Date.now()/1e3)),o={slug:e,lead:"1",callback:"jQuery19106226648019322614_"+t,_:t},n=`https://mysiteauditor.com/user/audit_status/?${Object.keys(o).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(o[e])}`)).join("&")}`;try{const e=await fetch(n);if(!e.ok)throw new Error("Network response was not ok");const t=await e.text(),o=t.indexOf("{"),a=t.lastIndexOf("}")+1;return JSON.parse(t.substring(o,a))}catch(e){throw console.error("There was a problem with the fetch operation: ",e),e}},download:async function(e,t,o="SEO CHECK"){const n={slug:e,type:"u",api_key:t,filename:(o??"SEO CHECK").replace(/(\s+)?\.pdf(?=$)/gim,"")},a=Object.keys(n).map((e=>e+"="+encodeURIComponent(n[e]))).join("&");return await new Promise(((e,t)=>{try{fetch("https://mysiteauditor.com/user/leads/download_report",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a}).then((t=>{t.blob().then((t=>{const n=new FileReader;n.onload=function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.scripting.executeScript({target:{tabId:t[0].id},function:function(e,t){const o=document.createElement("a");o.href=e,o.download=(t??"SEO CHECK").replace(/(\s+)?\.pdf(?=$)/gim,""),document.body.appendChild(o),o.click(),document.body.removeChild(o)},args:[n.result,o]}),e(!0)}))},n.readAsDataURL(t)}))})).catch((t=>{console.log("[Xact Solution] (mysiteauditor.download) Fetch Err:",t),e(null)}))}catch(t){console.error("[Xact Solution] mysiteauditor.download ERR:",t),e(null)}}))},seoCheck:async function(e,t,o,n=null,a=null,r="SEO CHECK"){if(!n&&!a)return console.log("[MySiteAuditor] seoCheck: No api_key nor reseller was given.");!a&&n&&(a="a5eff0aa966887974379287edb9c7b6540923034"==n?"Aadvanto":"ceff67c5eb4bca4063849c4d0454e085243fa041"==n?"Movido":null),!n&&a&&(n=/advanto/gi.test(a)?"a5eff0aa966887974379287edb9c7b6540923034":"ceff67c5eb4bca4063849c4d0454e085243fa041");let c=await this.check(e,t,o,n);return await new Promise(((e,t)=>{let o=setInterval((async t=>{let a=await mysiteauditor.slug(t.slug);"pending"!=a.response&&(clearInterval(o),"completed"==a.response?mysiteauditor.download(a.slug,n,r).then((t=>{e(t)})):(console.log("[Xact Solution] (mysiteauditor.seoCheck) Slug Err:",a),e(null)))}),4e3,c)}))}};