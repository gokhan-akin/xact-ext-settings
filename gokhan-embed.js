var attribute={},element={},predictionTimer=null,tipsToUse=[],loadingLogo=null;let CLASSNAME={MISMATCH:"mismatch",MISSING:"missing",MATCH:"match",PRESENT:"present",NOT_APPLICABLE:"not_applicable"};async function loadWidget(){window.location.href;let e=document.querySelector("div.ub_status_check_widget");if(e){attribute=getWidgetAttributes(e);let t=getParams();if(await loadStatusCheckMessages(attribute.key,attribute.language??"tr",t.ubrecheckid,t.ubrechecktoken),"undefined"==typeof statusCheckMessages)return null;element=getElements(e),await loadGoogleAPI(),await loadChartJS(),await loadUberall(),await loadTextsAndAttributes(),actualizeDirectoryGrid(),actualizeChart(),toggleResults(!1),element.ubwrap&&(element.ubwrap.style.visibility="visible"),element.loadingImg&&(element.loadingImg.src=loadingLogo??"https://www.icegif.com/wp-content/uploads/2023/07/icegif-1262.gif"),element.ubform&&element.button&&ubform.addEventListener("keyup",(function(e){"Enter"===e.key&&element.button.click()})),initParams()}}async function loadGoogleAPI(e="AIzaSyBG4_LC89Zr2-Ut2Jk1GQv8N3027L2R6w0"){return"string"==typeof window.location.href&&window.location.href.includes("127.0")&&(e=atob("QUl6YVN5Q3cwMVVkeHBPMjBpYUNHYTVxb2xycWJFRlVjVVQ2U3Jn")),await new Promise(((t,n)=>{const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places&loading=async`,s.onload=function(){t(!0)},s.onerror=function(){t(!1)},document.head.appendChild(s)}))}window.onload=e=>{loadWidget();window.location.href;tipsToUse=marketingTips;var t;loadingLogo=randomLoadingGifs[(t=randomLoadingGifs.length-1,Math.floor(Math.random()*(t+1)))]};const easteregg={get_egg:async function(){if(attribute&&1!=attribute.easteregg)return null;function e(e){return Math.floor(Math.random()*(e-1+1))+1}let t=null;e(100)==e(100)&&(t="bronze"),e(1e3)==e(1e3)&&(t="silver"),e(1e4)==e(1e4)&&(t="golden"),e(1e5)==e(1e5)&&(t="titanium"),e(1e6)==e(1e6)&&(t="platinum");const n={bronze:{name:"Bronze Osterei",image:atob("aHR0cHM6Ly9zdGF0aWMud2l4c3RhdGljLmNvbS9tZWRpYS81MmMyMGZfODZjY2I5NTkzMjY1NDY3MWJmNDI4NDg4OTQzY2Q5M2V+bXYyLnBuZw==")},silver:{name:"Silbernes Osterei",image:atob("aHR0cHM6Ly9zdGF0aWMud2l4c3RhdGljLmNvbS9tZWRpYS81MmMyMGZfNTEwYzhjZjRlZWQwNDJlMGJjNzYyNjhjYjQ2MWRlNjN+bXYyLnBuZw==")},golden:{name:"Goldenes Osterei",image:atob("aHR0cHM6Ly9zdGF0aWMud2l4c3RhdGljLmNvbS9tZWRpYS81MmMyMGZfOGY3YTA0MTk3MGY1NGE1ZjgzZDllYTFjOTZiODJkYzZ+bXYyLnBuZw==")},titanium:{name:"Titanium Osterei",image:atob("aHR0cHM6Ly9zdGF0aWMud2l4c3RhdGljLmNvbS9tZWRpYS81MmMyMGZfMzEwMTcxODRmMWZkNGNhNWEzYmQzMGMzYTBhNWU1MzF+bXYyLnBuZw==")},platinum:{name:"Platinum Osterei",image:atob("aHR0cHM6Ly9zdGF0aWMud2l4c3RhdGljLmNvbS9tZWRpYS81MmMyMGZfMGQ0Y2IwYjEzMzBlNDFmYzhmYTU5ZWU4NTBlNmQ1NzF+bXYyLnBuZw==")}};return t?n[t]:null},test:function(){if(this.remove_egg(),attribute&&1!=attribute.easteregg)return;let e=this.get_egg();e&&this.put_egg(e)},remove_egg:function(){let e=document.querySelector("#easteregg");e&&e.remove()},put_egg:function(e){if(this.remove_egg(),attribute&&1!=attribute.easteregg)return;let t=document.querySelector("#ubcta");t&&e&&e.hasOwnProperty("name")&&e.hasOwnProperty("image")&&t.insertAdjacentHTML("beforebegin",`<div id="easteregg" style="max-height:300px;display:flex;flex-direction:column;"><img style="height:120px;object-fit:contain;" src="${e.image}" id="easteregg"><span style="margin-top:20px;color: #2c2c2c;font-size: 12px;text-align: center;" id="easteregg"><b style="font-weight:bold;font-size:14px;">${e.name}</b><br> entdeckt!</span></div>`)}};async function loadChartJS(){return await new Promise(((e,t)=>{const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/chart.js",n.onload=function(){e(!0)},n.onerror=function(){e(!1)},document.head.appendChild(n)}))}async function loadUberall(){return await new Promise(((e,t)=>{const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/gokhan-akin/xact-ext-settings@latest/uberall.js?t=1758283011",n.onload=function(){e(!0)},n.onerror=function(){e(!1)},document.head.appendChild(n)}))}async function loadStatusCheckMessages(e,t="tr",n,s){return await new Promise(((e,t)=>{const n=document.querySelector("head");function s(t){t.match(/(?<=<script>|<script\stype=["']text\/javascript["']>)[\s\S\r\n]*?(?=<\/script>)/gim).forEach((e=>{const t=document.createElement("script");t.type="text/javascript",t.text=e.replaceAll("\\u002f","/"),n.appendChild(t)})),e(!0)}fetch("https://cdn.jsdelivr.net/gh/gokhan-akin/xact-ext-settings@latest/statusCheckMessages.html").then((e=>e.text())).then((e=>{s(e)})).catch((t=>{e(!1)})),fetch("https://cdn.jsdelivr.net/gh/gokhan-akin/xact-ext-settings@latest/statusCheckMessages.html").then((e=>e.text())).then((e=>{s(e)})).catch((t=>{e(!1)}))}))}async function loadTextsAndAttributes(){if("undefined"==typeof statusCheckMessages&&void 0!==attribute.key&&await loadStatusCheckMessages(attribute.key),"undefined"!=typeof statusCheckMessages){if(element.qualityText&&(element.qualityText.innerHTML=`${statusCheckMessages["top.box.chart.explanation"]} <span id="totalPortals">-</span> ${statusCheckMessages["top.box.chart.explanation.2"]}`,element.totalPortals=document.querySelector("#totalPortals")),element.copyLink){let e=element.copyLink.querySelector("span");e&&(e.innerHTML=statusCheckMessages["share.link"])}if(element.pdfExport){let e=element.pdfExport.querySelector("span");e&&(e.innerHTML=statusCheckMessages["download.pdf.link"])}if(element.queryCaptionText&&(element.queryCaptionText.innerHTML=statusCheckMessages["results.header"]),element.resultsListText&&(element.resultsListText.innerHTML=statusCheckMessages["results.table.header"]),element.ubgridcaption&&(element.ubgridcaption.innerHTML=statusCheckMessages["directory.grid.title"]),element.button&&(element.button.innerHTML=statusCheckMessages["search.label.submit"]),element.ubzip){let e=element.ubzip.parentElement.querySelector("label");e&&(e.innerHTML=statusCheckMessages["search.label.zip"])}if(element.ubcountry){let e=element.ubcountry.parentElement.querySelector("label");e&&(e.innerHTML=statusCheckMessages["search.label.country"])}if(element.ubname){let e=element.ubname.parentElement.querySelector("label");e&&(e.innerHTML=statusCheckMessages["search.label.name"])}if(element.ubstreet){let e=element.ubstreet.parentElement.querySelector("label");e&&(e.innerHTML=statusCheckMessages["search.label.street"])}if(attribute.hasOwnProperty("directories")&&(attribute.directories=attribute.directories.split(",")),element.ubcountry&&attribute.countries){let e=attribute.countries.split(","),t={DE:"Deutschland",AT:"Österreich",CH:"Schweiz",LI:"Liechtenstein",LU:"Luxemburg",TR:"Türkiye"};t&&e.forEach((e=>{if(t[e]){let n=document.createElement("option");n.value=e,n.textContent=t[e],element.ubcountry.appendChild(n)}}))}element.button&&(attribute.hasOwnProperty("buttonbgcolor")&&attribute.buttonbgcolor.length&&(element.button.style.backgroundColor=attribute.buttonbgcolor),attribute.hasOwnProperty("buttontextcolor")&&attribute.buttontextcolor.length&&(element.button.style.color=attribute.buttontextcolor)),element.form&&attribute.hasOwnProperty("bgcolor")&&attribute.bgcolor.length&&(element.form.style.backgroundColor=attribute.bgcolor),element.headertext&&attribute.hasOwnProperty("headertext")&&attribute.headertext.length&&(element.headertext.textContent=attribute.headertext),element.ctatext&&attribute.hasOwnProperty("ctatext")&&(element.ctatext.textContent=attribute.ctatext),element.ctabutton&&attribute.hasOwnProperty("ctabuttontext")&&(element.ctabutton.textContent=attribute.ctabuttontext),element.ctalink&&attribute.hasOwnProperty("ctalink")&&(element.ctalink.href=attribute.ctalink),element.allLinks&&attribute.hasOwnProperty("linkcolor")&&attribute.linkcolor.length&&element.allLinks.forEach((e=>{e.style.color=attribute.linkcolor})),element.allTexts&&attribute.hasOwnProperty("textcolor")&&attribute.textcolor.length&&element.allTexts.forEach((e=>{e.style.color=attribute.textcolor})),element.ubtable&&(attribute.hasOwnProperty("showtable")&&1!=attribute.showtable?element.ubtable.style.display="none":element.ubtable.style.removeProperty("display")),element.pdfExport&&attribute.hasOwnProperty("pdfexport")&&1!=attribute.pdfexport&&(element.pdfExport.style.display="none"),element.copyLink&&attribute.hasOwnProperty("sharelink")&&1!=attribute.sharelink&&(element.copyLink.style.display="none"),attribute.paddingtop&&"string"==typeof attribute.paddingtop&&(widget.style.paddingTop=widget.style.paddingTop),element.queryLine&&(element.queryLine.removeEventListener("click",(function(e){})),element.queryLine.addEventListener("click",(function(e){toggleForm()}))),element.copyLink&&(element.copyLink.removeEventListener("click",(function(e){})),element.copyLink.addEventListener("click",(function(e){let t=element.copyLink.innerHTML;element.copyLink.hasAttribute("url")&&navigator.clipboard.writeText(element.copyLink.getAttribute("url")).then((()=>{let e=element.copyLink.querySelector("span");e&&(e.innerHTML=statusCheckMessages["share.link.copy.success"]),element.copyLink.disabled=!0,setTimeout((()=>{element.copyLink.innerHTML=t,element.copyLink.disabled=!1}),1e3)}))}))),element.ubcountry.addEventListener("change",(function(e){actualizeDirectoryGrid()})),element.ubname&&element.ubstreet&&element.ubzip&&[element.ubname,element.ubstreet,element.ubzip].forEach((function(e){e.removeEventListener("keydown",(function(e){})),e.addEventListener("keydown",(function(e){13===e.keyCode&&element.button&&!element.button.getAttribute("disabled")&&element.button.click()}))})),element.skipSvg&&element.skipSvg.addEventListener("click",(function(e){element.skipSvg.hasAttribute("disabled")||processResults()})),element.predictionInput.addEventListener("input",(()=>{if(predictionTimer&&clearTimeout(predictionTimer),attribute.prediction){const e=element.predictionInput.value;e.length>5?predictionTimer=setTimeout((()=>{fetchPredictions(e)}),500):element.predictionList.innerHTML=""}})),document.addEventListener("click",(function(e){let t=document.querySelector(":focus");t&&(/prediction|prediction/gi.test(t.id)||!e.target||/prediction|prediction/gi.test(e.target.id))||(displayPredictions(null,null),element.predictionInput&&(element.predictionInput.value=""))})),actualizeParameterAndAttributeManagedFunctions()}}async function getWebsiteAsHTML(e){return e?(e=e.replace("http:","https:"),await new Promise(((t,n)=>{fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(e)}`).then((e=>e.json())).then((e=>{e.contents=(e.contents??"").replace(/\n|\r|\t/gi,"").replace(/<!--.+?-->/gi,""),e.error&&t(""),t(200==e.status.http_code?e.contents:null)})).catch((e=>{n(e)}))}))):""}function actualizeParameterAndAttributeManagedFunctions(){attribute&&(element.nearme360&&(element.nearme360.style.display=attribute.nearme360?"block":"none"),element.summary&&attribute.hasOwnProperty("summary")&&1==attribute.summary&&(element.summary.style.display="flex"),element.predictionform&&(!attribute.hasOwnProperty("prediction")||attribute.hasOwnProperty("prediction")&&0!=attribute.prediction)&&fetchPredictions(" ",(()=>{attribute.prediction=!0,element.predictionform.style.display="flex"})))}function parseEmailsFromHTML(e){if("string"!=typeof e)return null;let t=e.replace(/\\x.{2}/gi,"").match(/[\w\.]+@([\w-]+\.)+[a-zA-Z-]{2,7}/gi);return t&&(t=[...new Set(t)]),t}function parseOwnersFromHTML(e,t=350){let n=[];if(e){let s,a=e,i=["yükümlü"],r=i.length-1;for(;(!s||s>-1)&&r>-1;)if(s=a.toLowerCase().indexOf(i[r]),-1==s)r--,s=void 0,a=e;else{let e=a.substring(s,s+t).replace(/<.+?>|\\.|\s\s+/gim," ").replace(/\s\s+/gim,"■").replace(/(\{|[^\w\s:\-äüöß&§;■\.]).+/gi,"");e.length>10&&n.push(e),a=a.substring(s+t)}}return n}function findImprintLinkFromHTML(e=null,t=null){if(!e)return null;if(e.includes("<")||e.includes(">")||(t=e,e=null),!e)return null;let n=e.search(/(>|\/)(impressum|imprint)(<)?/gi);if(n>-1){let s=(e.substring(e.lastIndexOf("href",n),n+200).match(/(?<=href\=").+?(?=")/gi)??[null])[0];if(!s)return null;if(t){let e=t.replace(/http(s)?:\/\/|www\./gi,"").replace(/\/(.+)?/gi,""),n=s.replace(/http(s)?:\/\/|www\./gi,"").replace(/\/(.+)?/gi,"");if(/^(http|www)/i.test(s)){if(n!=e)return null}else s="https://"+e+"/"+s.replace(/^\//,"")}return s}return null}async function fetchPredictions(e,t=displayPredictions){if("undefined"==typeof google)return;const n=new google.maps.places.AutocompleteService;return await n.getPlacePredictions({input:e,componentRestrictions:{country:attribute.countries.split(",")}},t)}function predictionOnClick(e,t,n,s,a){element.ubname&&element.ubstreet&&element.ubzip&&element.ubcountry&&(element.ubname.value=t,element.ubstreet.value=n,element.ubzip.value=s,element.ubcountry.value=a)}function getComponent(e,t,n=!1){return n?e.find((e=>e.types.includes(t)))?.short_name||"":e.find((e=>e.types.includes(t)))?.long_name||""}function displayPredictions(e,t){if(element.predictionList.innerHTML="","undefined"==typeof google||t!==google.maps.places.PlacesServiceStatus.OK||!e)return;const n=new google.maps.places.PlacesService(document.createElement("div"));e.forEach((e=>{n.getDetails({placeId:e.place_id,fields:["name","address_components"]},(function(t,n){if(n===google.maps.places.PlacesServiceStatus.OK){const n=t.address_components,s=getComponent(n,"country",!0);if(void 0!==attribute.countries&&attribute.countries.includes(s)){const a=document.createElement("div");a.id="predictionEntry";const i=getComponent(n,"street_number"),r=getComponent(n,"route")+(i&&i.length?" "+i:""),o=getComponent(n,"postal_code"),l=t.name;let c=`${l}, ${r}, ${s}-${o}`;e.matched_substrings.forEach((t=>{let n=e.description.substr(t.offset,t.length),s=c.toLowerCase().indexOf(n.toLowerCase());s>-1&&(c=c.substring(0,s)+"<b>"+c.substring(s,s+t.length)+"</b>"+c.substring(s+n.length))})),a.innerHTML=c,a.addEventListener("click",(function(e){predictionOnClick(e,l,r,o,s)})),element.predictionList.appendChild(a)}}}))}))}async function initParams(){let e=getParams();if(attribute&&(attribute.hasOwnProperty("nearme360")||(attribute.nearme360=!!e.nearme360),attribute.hasOwnProperty("summary")||(attribute.summary=!!e.summary),actualizeParameterAndAttributeManagedFunctions()),e.ubrecheckid&&e.ubrechecktoken){let t=window.uberallStatusCheckStoredSearchData?window.uberallStatusCheckStoredSearchData.searchData:await uberall.getRecheckInfo({recheckid:e.ubrecheckid,rechecktoken:e.ubrechecktoken});t&&(e.ubname=t.name,e.ubstreet=`${t.street} ${t.streetNo}`,e.ubzip=t.zip,e.ubcountry=t.country,e.ubcity=t.city)}let t=e.ubcountry??"TR";void 0===attribute.countries||attribute.countries.toUpperCase().includes(t.toUpperCase())||(t="TR"),(void 0!==e.force||e.ubrecheckid&&e.ubrechecktoken)&&(e.ubcountry=t),element.ubname&&element.ubstreet&&element.ubzip&&element.ubcountry&&(element.ubcountry.value=t,element.ubname.value=e.ubname??"",element.ubstreet.value=e.ubstreet??"",element.ubzip.value=e.ubzip??""),(e.ubrecheckid&&e.ubrechecktoken||1==e.autostart)&&searchInit(e)}async function generatePDF(e,t=!1){let n,s={token:element.pdfExport.getAttribute("token")??element.pdfExport.getAttribute("ubrechecktoken")??element.pdfExport.getAttribute("rechecktoken"),showgraph:1==(attribute.showgraph??!0),bgcolor:attribute.bgcolor??"#27435c",contactphone:attribute.contactphone??"",contactemail:attribute.contactemail??"",headertext:attribute.headertext??"Test et",language:attribute.language??"tr",public_key:attribute.key??void 0};if(1==t)try{let t=await fetch("http://192.168.31.213:1327/pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();n=s.link??s.url}catch(e){t=!1}return t||(n=await uberall.pdfExport(s.token,void 0,s.public_key,s.showgraph,"#27435c",s.contactphone,s.contactemail,s.headertext,s.language)),n}function pdfExportInit(){if(!element.pdfExport)return null;let e=element.pdfExport.innerHTML;element.pdfExport.disabled=!0;let t=element.pdfExport.querySelector("span");function n(){element.pdfExport.innerHTML=e,element.pdfExport.disabled=!1}t&&(t.innerHTML=statusCheckMessages["download.pdf.in.progress"]),generatePDF(window.lastSearchData,1==attribute.custompdf).then((e=>{const t=document.createElement("a");t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t),n()})).catch((e=>{n()}))}function actualizeLoadingBar(e,t,n=!1){if("number"!=typeof e||"number"!=typeof t)return;let s=document.querySelector("#myBar");s&&(s.style.width=(e<=0?0:e/t*100)+"%"),"number"==typeof n&&(n=n>=e),null==n||null==n?(element.skipSvg.removeAttribute("disabled"),element.skipSvg.setAttribute("disabled","true"),element.skipSvg.style.display="none"):"boolean"==typeof n&&(element.skipSvg.style.removeProperty("display"),1==n?element.skipSvg.removeAttribute("disabled"):element.skipSvg.setAttribute("disabled","true"))}function searchInit(e=null){delete window.lastSearchData,toggleButton(!1),toggleResults(!1),clearSummary(),clearResults();let t={infoTextSize:14,boolTickSize:18,directoryLogoSize:32,country:element.ubcountry.value,public_key:attribute.key,name:element.ubname.value,street:element.ubstreet.value,zip:element.ubzip.value,city:"",directories:attribute.directories,callback:function(t){if(1==t.dirDone&&"INVALID_PARAMETER"==t.result.status)element.pdfExport.removeAttribute("id"),element.pdfExport.removeAttribute("token"),toggleErrorModal(t.result.message,!0),toggleButton(!0);else{if(1==t.dirDone&&(element.pdfExport.setAttribute("recheckid",t.searchData?t.searchData.id:t.id),element.pdfExport.setAttribute("token",t.searchData?t.searchData.token:t.token)),actualizeLoadingBar(t.dirDone,t.dirTotal,t.dirDone>=t.dirTotal/1.2),window.lastSearchData||(window.lastSearchData=t),window.lastSearchData.list||(window.lastSearchData.list=[]),window.lastSearchData.list.push(t.result),e&&(!e.hasOwnProperty("ubrecheckid")&&t.hasOwnProperty("id")&&(e.ubrecheckid=t.id,e.ubrechecktoken=t.token),window.lastSearchData.hasOwnProperty("searchData")||(window.lastSearchData.searchData=e)),1==t.dirDone){if(toggleLoadingModal(!0),element.searchQuery&&(element.searchQuery.textContent=`${t.searchData.name}, ${t.searchData.streetAndNo??t.searchData.street+" "+t.searchData.streetNo}, ${t.searchData.zip}, ${t.searchData.country}`),setParams({ubrecheckid:t.searchData.id,ubrechecktoken:t.searchData.token}),element.copyLink){let e=`${window.location.href.split("?")[0]}?ubrecheckid=${t.searchData.id}&ubrechecktoken=${t.searchData.token}`;element.copyLink.setAttribute("url",e)}element.pdfExport&&(element.pdfExport.setAttribute("recheckid",t.searchData.id),element.pdfExport.setAttribute("token",t.searchData.token))}if(t.finished){let e=window.lastSearchData.list;window.lastSearchData=t,window.lastSearchData.list=e}if(attribute.instant&&(processResult(t),toggleResults(!0),toggleLoadingModal(!1)),"GOOGLE"==t.directory&&1==attribute.summary){let n=t.result.response.result;getWebsiteAsHTML(n?n.website:null).then((t=>{if(element.pdfExport&&e&&element.pdfExport.getAttribute("recheckid")==e.ubrecheckid){if(element.foundEmailsDiv){let e=parseEmailsFromHTML(t);e&&e.forEach((e=>{addMailToList(e,`Websitesi: ${n.website}`)}))}if(element.foundOwnersDiv){let e=element.foundOwnersDiv.querySelector("span#foundOwners");if(e){let s=findImprintLinkFromHTML(t,n.website);s&&getWebsiteAsHTML(s).then((t=>{let s=parseOwnersFromHTML(t);if(s.length&&(element.foundOwnersDiv.style.display="flex",s.forEach((t=>{e.innerHTML.toLowerCase().includes(t.toLowerCase())||e.insertAdjacentHTML("beforeend",`<span>[...] <i>"${t}"</i> [...]</span>`)}))),element.foundEmailsDiv){let e=parseEmailsFromHTML(t);e&&e.forEach((e=>{addMailToList(e,`Künye: ${n.website}`)}))}}))}}}})).catch((e=>{}))}}}};e&&(e.hasOwnProperty("ubrechecktoken")&&(t.token=e.ubrechecktoken),e.hasOwnProperty("ubrecheckid")&&(t.id=e.ubrecheckid),e.hasOwnProperty("ubcountry")&&(t.country=e.ubcountry),e.hasOwnProperty("ubzip")&&(t.zip=e.ubzip),e.hasOwnProperty("ubcity")&&(t.city=e.ubcity),e.hasOwnProperty("ubname")&&(t.name=e.ubname),e.hasOwnProperty("ubstreet")&&(t.street=e.ubstreet)),void 0!==attribute.countries&&attribute.countries.includes(t.country)?uberall.fullCheck(t).then((async e=>{if(e.errorCode){let n=t;4==n.zip.length&&(n.country="AT"==n.country?"CH":"AT"),e=await uberall.fullCheck(n)}e.errorCode||"INVALID_PARAMETER"==e.status?(toggleErrorModal(statusCheckMessages["normalization.error"]??e.message,!0),toggleButton(!0)):"SERVER_ERROR"==e.status?(toggleErrorModal(e.message,!0),toggleButton(!0)):(e.hasOwnProperty("searchData")||(e.searchData=t),processResults(e))})).catch((e=>{toggleErrorModal(e,!0),toggleButton(!0)})):(toggleErrorModal("Bu ülke desteklenmiyor!",!0),toggleButton(!0))}function addMailToList(e,t){if(element.foundEmailsDiv&&"string"==typeof e&&!/wix|wordpress/gi.test(e)&&/\.[a-z]{2,8}/gi.test(e)&&(e=e.toLowerCase()).includes("@")&&!element.foundEmailsDiv.textContent.toLowerCase().includes(e)){let n=element.foundEmailsDiv.querySelector("#foundEmails");if(n){element.foundEmailsDiv.style.display="flex";let s=document.createElement("span");s.textContent=e,checkMail(e).then((n=>{if(n){"valid"==n.status||n.catch_all?(s.style.color="#63A663",s.innerHTML=`<b>${e}</b>`):"invalid"==n.status&&(s.style.color="#e8636355",s.innerHTML=`<strike>${e}</strike>`),"unknown"==n.status&&(s.style.color="#F28025");let a=`${(n.status??"").toUpperCase()} (${t||""})\n`;for(const e in n)a.length&&(a+="\n"),a+=`[${e.toUpperCase()}:] ${n[e]}`;s.title=a}})),n.appendChild(s)}}}function addWebsiteToList(e,t){if(element.foundWebsitesDiv&&"string"==typeof e&&(e=e.toLowerCase()).includes(".")&&!element.foundWebsitesDiv.textContent.toLowerCase().includes(e)){let n=element.foundWebsitesDiv.querySelector("#foundWebsites");if(n){element.foundWebsitesDiv.style.display="flex";let s=document.createElement("span");s.textContent=e;let a=`${t||""}`;s.title=a,n.appendChild(s)}}}function addPhoneToList(e,t){if(element.foundPhonesDiv&&"string"==typeof e&&(e=e.toLowerCase(),!element.foundPhonesDiv.textContent.toLowerCase().includes(e))){let n=element.foundPhonesDiv.querySelector("#foundPhones");if(n){element.foundPhonesDiv.style.display="flex";let s=document.createElement("span");s.textContent=e;let a=`${t||""}`;s.title=a,n.appendChild(s)}}}function addNameToList(e,t){if(element.foundNamesDiv&&"string"==typeof e&&(e=e.toLowerCase(),!element.foundNamesDiv.textContent.toLowerCase().includes(e))){let n=element.foundNamesDiv.querySelector("#foundNames");if(n){element.foundNamesDiv.style.display="flex";let s=document.createElement("span");s.textContent=e;let a=`${t||""}`;s.title=a,n.appendChild(s)}}}function addAddressToList(e,t){if(element.foundAddressDiv&&"string"==typeof e&&(e=e.toLowerCase(),!element.foundAddressDiv.textContent.toLowerCase().includes(e))){let n=element.foundAddressDiv.querySelector("#foundAddress");if(n){element.foundAddressDiv.style.display="flex";let s=document.createElement("span");s.textContent=e;let a=`${t||""}`;s.title=a,n.appendChild(s)}}}async function checkMail(e){let t=e.split("@");return await new Promise(((n,s)=>{let a=`https://api.experte.com/tools/email-finder?name=${t[0]}&domain=${t[1]}`;attribute&&attribute.verifyemailpro&&(a=`https://api.verifyemailpro.com/check?email=${e}`),fetch(a).catch((e=>{})).then((e=>e.json())).catch((e=>{})).then((e=>n(Array.isArray(e)?e[0]:e))).catch((e=>{}))}))}function clearSummary(){if(element.summary){element.summary.querySelectorAll("div[id^=found][id$=Div]").forEach((e=>{e.style.display="none";let t=e.querySelector('[id^="found"');t&&(t.innerHTML="")}))}}function processResult(e){if(!e)return;let t={recheckid:e.id||(e.searchData??{}).id,token:e.token||(e.searchData??{}).token},n={recheckid:t.recheckid,token:t.token};if(element.pdfExport&&(n={recheckid:element.pdfExport.getAttribute("recheckid"),token:element.pdfExport.getAttribute("token")}),n.recheckid!=t.recheckid||n.token!=t.token)return;//! FIXME: liechtenstein and luxemburg has that problem, it returns
1==e.dirDone&&toggleForm(!1).then((()=>toggleButton(!0))),e.finished;let s={PRESENT:"https://static-prod.uberall.com/assets/statusCheck/present.svg",MISSING:"https://static-prod.uberall.com/assets/statusCheck/missing.svg",NOT_APPLICABLE:"https://static-prod.uberall.com/assets/statusCheck/not_available.svg"};if("undefined"!=typeof availabilityIcons)for(const e in s)availabilityIcons.hasOwnProperty(e)||(availabilityIcons[e]=s[e]),s.hasOwnProperty(e)||(s[e]=availabilityIcons[e]);actualizeChart(e.missing,e.incorrect,e.correct,e.dirTotal-e.dirDone);let a=document.querySelector("#totalPortals");if(a&&(a.innerHTML=e.missing+e.incorrect+e.correct),1==attribute.summary){let t=e.variations??{};for(const e in t)if(e.includes("mail"))for(const n in t[e])addMailToList(n,t[e][n].source);else{let n=e.substring(0,1).toUpperCase()+e.substring(1)+(e.endsWith("s")?"":"s");n.includes("treetAndNo")&&(n="Address");let s=`found${n}Div`;if(element.hasOwnProperty(s)&&element[s]){let a=element[s].querySelector(`#found${n}`);if(a){a.innerHTML="";for(const i in t[e]){let r=t[e][i];if(uberall)for(let e=0;e<r.length;++e)uberall.directoryType.hasOwnProperty(r[e])&&(r[e]=uberall.directoryType[r[e]].name);a.insertAdjacentHTML("beforeend",`<span title="${r.join(", ")}">${"Websites"==n?`<a target="_blank" href="https://${i}" style="text-decoration:none;color:inherit;">${i}</a>`:i}</span>`),element[s].style.display="flex"}}}}}if(element.resultsList.innerHTML.length<5)for(const t of e.portalsByStatus.loading){let e=document.createElement("div");e.id=t,e.classList.add("ubxresult"),e.innerHTML=`<div class="portaldiv"><a id="listingurl" target="_blank"><img draggable="false" src="${uberall.directoryType[t].logo}" id="portal_img"> </a> <span id="portal_name">${uberall.directoryType[t].name}</span> </div> <div class="infos"><img class="loadingImg" draggable="false" src="https://static.wixstatic.com/media/52c20f_7db6ddafa3d744f187d0550222f6989e~mv2.gif" style=" max-height: 100%;align-self: left;"></div> <div class="svgdiv"> </div> <div class="svgdiv"></div>`,element.resultsList.appendChild(e)}let i=e.result;if(!i)return;let r=i.response.result;if(!r)return;let o=r.directoryType,l=element.resultsList.querySelector(`#${o}.ubxresult`);if(!l)return;l.innerHTML=`<div class="portaldiv"> <a id="listingurl" target="_blank"><img draggable="false" src="${uberall.directoryType[o].logo}" id="portal_img"> </a> <span id="portal_name">${uberall.directoryType[o].name}</span> </div> <div class="infos"> <span id="name">-</span> <div id="details"> <span id="street">-, -</span> <span id="number">-</span> <a id="website" target="_blank">-/</a> </div> </div> <div class="svgdiv"><div id=timesInfo></div><svg id="times" viewbox="0 0 800 400"> <path d="M48.1,35.3h3.2c0.9,0,1.6,0.7,1.6,1.6c0,0,0,0,0,0v14c0,0.4-0.2,0.8-0.4,1.2l-9,9c-0.6,0.6-1.6,0.6-2.2,0 l-2.2-2.2c-0.6-0.6-0.6-1.6,0-2.2l7.5-7.6V37c-0.1-0.8,0.5-1.6,1.4-1.7C48,35.3,48,35.3,48.1,35.3z" /> <path d="m256 8c-137 0-248 111-248 248s111 248 248 248 248-111 248-248-111-248-248-248zm92.49 313-20 25a16 16 0 0 1 -22.49 2.5l-67-49.72a40 40 0 0 1 -15-31.23v-155.55a16 16 0 0 1 16-16h32a16 16 0 0 1 16 16v144l58 42.5a16 16 0 0 1 2.49 22.5z" /> </svg> </div> <div class="svgdiv"><svg id="photos" viewbox="0 0 700 400"> <path d="M308.1,277.95c0,35.7-28.9,64.6-64.6,64.6s-64.6-28.9-64.6-64.6s28.9-64.6,64.6-64.6S308.1,242.25,308.1,277.95z M440.3,116.05c25.8,0,46.7,20.9,46.7,46.7v122.4v103.8c0,27.5-22.3,49.8-49.8,49.8H49.8c-27.5,0-49.8-22.3-49.8-49.8v-103.9 v-122.3l0,0c0-25.8,20.9-46.7,46.7-46.7h93.4l4.4-18.6c6.7-28.8,32.4-49.2,62-49.2h74.1c29.6,0,55.3,20.4,62,49.2l4.3,18.6H440.3z M97.4,183.45c0-12.9-10.5-23.4-23.4-23.4c-13,0-23.5,10.5-23.5,23.4s10.5,23.4,23.4,23.4C86.9,206.95,97.4,196.45,97.4,183.45z M358.7,277.95c0-63.6-51.6-115.2-115.2-115.2s-115.2,51.6-115.2,115.2s51.6,115.2,115.2,115.2S358.7,341.55,358.7,277.95z" /> </svg></div>`;const c={portal_img:l.querySelector("#portal_img"),portal_name:l.querySelector("#portal_name"),listingurl:l.querySelector("#listingurl"),name:l.querySelector("#name"),number:l.querySelector("#number"),street:l.querySelector("#street"),website:l.querySelector("#website"),times:l.querySelector("#times"),photos:l.querySelector("#photos"),details:l.querySelector("#details"),timesInfo:l.querySelector("#timesInfo"),infos:l.querySelector(".infos")};c.portal_name&&(c.portal_name.textContent=uberall.directoryType[o].name);let u=!1;if("SUCCESS"==i.status){if(!i.response.alreadyManaged&&!i.response.managedLocation||(i.response.alreadyManaged=!0),void 0!==i.response.result.attribution&&null!=i.response.result.attribution&&/movido|aadvanto|spectario/gi.test(i.response.result.attribution.name)&&"undefined"!=typeof searchData){let e=i.response.result.name.replace(/[^a-z0-9]/gi,""),t=searchData.name.replace(/[^a-z0-9]/gi,"");(e.includes(t)||t.includes(e))&&i.response.result.zip==searchData.zip&&(i.response.alreadyManaged=!0)}i.response.result.attribution&&(attributionName=i.response.result.attribution.name)}if(u||(u=i.response.alreadyManaged),u){if(c.infos){let e="";c.infos.innerHTML=e,c.infos.classList.add("managed"),l.classList.add("managed"),l.querySelectorAll(".svgdiv").forEach((e=>{e.remove()}));let t=l.querySelector("#portal_img");t&&(t.src="https://static-prod.uberall.com/assets/statusCheck/safeguard_active.svg"),document.querySelectorAll(".ubxresult").forEach((t=>{let n=t.querySelector(".infos"),s=t.querySelector("#portal_img");s&&(s.src="https://static-prod.uberall.com/assets/statusCheck/safeguard_active.svg"),n.innerHTML=e,n.classList.add("managed"),t.classList.add("managed"),t.querySelectorAll(".svgdiv").forEach((e=>{e.remove()}))}))}}else{if(c.portal_img&&(c.portal_img.src=i.html.logo),c.times&&(/svg/i.test(c.times.tagName)?c.times.classList.add(CLASSNAME[r.openingHoursStatus]??""):c.times.src=s[r.openingHoursStatus],"PRESENT"==r.openingHoursStatus&&r.openingHours&&r.openingHours.length>0)){c.times.addEventListener("mouseenter",(function(e){c.timesInfo.style.display="flex",c.timesInfo.style.visibility="visible"})),c.times.addEventListener("mouseleave",(function(e){fadeOut(c.timesInfo)}));let e=["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"],t=c.timesInfo;for(let n=0;n<7;n++){let s=r.openingHours.filter((e=>e.dayOfWeek==n+1&&!e.hasOwnProperty("closed"))),a=`<b>${e[n]}:</b> Geschlossen`,i=CLASSNAME.MISSING;s.length>0&&(i=CLASSNAME.PRESENT,a=`<b>${e[n]}:</b> ${s[0].from1} - ${s[0].to1}`,s[0].hasOwnProperty("from2")&&s[0].hasOwnProperty("to2")&&(a+=` | ${s[0].from2} - ${s[0].to2}`));let o=`<div id="timeLine">\n\t\t\t\t\t<svg class="${i}" style=width:20px;height:20px; viewBox="0 0 490 490"><path d="M245 0C109.5 0 0 109.5 0 245s109.5 245 245 245 245-109.5 245-245S380.5 0 245 0zm0 449.3c-112.6 0-204.3-91.7-204.3-204.3S132.4 40.7 245 40.7 449.3 132.4 449.3 245 357.6 449.3 245 449.3z"/><path d="M290.9 224.1h-25v-95.9c0-11.5-9.4-20.9-20.9-20.9s-20.9 9.4-20.9 20.9V245c0 11.5 9.4 20.9 20.9 20.9h45.9c11.5 0 20.9-9.4 20.9-20.9s-9.5-20.9-20.9-20.9z"/></svg>\n\t\t\t\t\t<span>${a}</span>\n\t\t\t\t</div>`;t.innerHTML+=o}}if(c.photos&&(/svg/i.test(c.photos.tagName)?c.photos.classList.add(CLASSNAME[r.photosStatus]??""):c.photos.src=s[r.photosStatus]),r.name){if(c.listingurl&&null!=r.listingUrl&&(c.listingurl.href=r.listingUrl),c.name&&(c.name.innerHTML=`<span class="${"MISMATCH"==r.nameStatus?CLASSNAME.MISMATCH:""}">${r.name}</span>`),c.street){let e;switch(r.streetAndNoStatus){case"MISSING":e=`<span class="${CLASSNAME.MISSING}">${r.streetAndNo?r.streetAndNo:statusCheckMessages["address.fields.missing"]}</span>`;break;case"MISMATCH":e=`<span class="${CLASSNAME.MISMATCH}">${r.streetAndNo}</span>`;break;case"MATCH":case"PRESENT":e=r.streetAndNo;break;default:e="-"}if(r.city)switch(e+=", ",r.cityStatus){case"MISSING":e+=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["city.error"]}</span>`;break;case"MISMATCH":e+=`<span class="${CLASSNAME.MISMATCH}">${r.city}</span>`;break;case"MATCH":case"PRESENT":e+=r.city;break}c.street.innerHTML=e}if(c.number){let e="";switch(r.phoneStatus){case"MISSING":e=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["phone.missing"]}</span>`;break;case"MISMATCH":e=`<span class="${CLASSNAME.MISMATCH}">${r.phone}</span>`;break;case"MATCH":case"PRESENT":e=`<span class="${CLASSNAME.PRESENT}">${r.phone}</span>`;break;case"NOT_APPLICABLE":e=`<span class="${CLASSNAME.NOT_APPLICABLE}">${statusCheckMessages["phone.not.applicable"]}</span>`;break}c.number.innerHTML=e}if(c.website){let e="";switch(r.websiteStatus){case"MISSING":e=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["website.missing"]}</span>`;break;case"MISMATCH":e=`<span class="${CLASSNAME.MISMATCH}">${r.website}</span>`;break;case"MATCH":case"PRESENT":e=`<span class="${CLASSNAME.PRESENT}">${r.website}</span>`;break;case"NOT_APPLICABLE":e=`<span class="${CLASSNAME.NOT_APPLICABLE}">${statusCheckMessages["website.not.applicable"]}</span>`;break}c.website.innerHTML=e}r.website&&(c.website.href=r.website)}else"TECHNICAL_PROBLEMS"==r.syncStatus&&l.classList.add("opacity-02"),c.name&&(c.name.innerHTML=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["TECHNICAL_PROBLEMS"==r.syncStatus?"listing.technical.errors":"listing.not.found"]}</span>`),c.times&&(c.times.style.display="none"),c.photos&&(c.photos.style.display="none"),c.details&&("boolean"==typeof DESCRIPTION_FOR_MISSING_PORTALS&&1==DESCRIPTION_FOR_MISSING_PORTALS&&uberall.directoryType[o].description?(c.details.classList.add("description"),c.details.innerHTML=uberall.directoryType[o].description):(c.details.innerHTML="",c.details.remove())),l.classList.add("noentry")}arrangePageBreaks()}function processResults(e=window.lastSearchData.list){if(isLoadingModalVisible())if(e){if("INVALID_PARAMETER"==e[0].status)throw new Error(e[0].message);if(element.foundEmailsDiv&&(element.foundEmailsDiv.style.display="none"),e.lang||(e.lang="TR"),toggleLoadingModal(!1),toggleButton(!0),e.status)"INVALID_PARAMETER"==e.status?(toggleErrorModal(e.message.includes("token")?e.message:statusCheckMessages["normalization.error"],!0),toggleForm(!0),toggleResults(!1)):(toggleErrorModal("Hata: "+(e.message??e.status),!0),toggleForm(!0),toggleResults(!1));else{let t={incorrect:0,correct:0,missing:0,get total(){return this.incorrect+this.correct+this.missing}},n=!1,s=null,a={emails:[],websites:[],phones:[],names:[],address:[]},i=window.lastSearchData.searchData,r=(document.querySelector(".ubxresult"),'<div class="portaldiv"> <a id="listingurl" target="_blank"><img draggable="false" src="" id="portal_img"> </a> <span id="portal_name">-</span> </div> <div class="infos"> <span id="name">-</span> <div id="details"> <span id="street">-, -</span> <span id="number">-</span> <a id="website" target="_blank">-/</a> </div> </div> <div class="svgdiv"><div id=timesInfo></div><svg id="times" viewbox="0 0 800 400"> <path d="M48.1,35.3h3.2c0.9,0,1.6,0.7,1.6,1.6c0,0,0,0,0,0v14c0,0.4-0.2,0.8-0.4,1.2l-9,9c-0.6,0.6-1.6,0.6-2.2,0 l-2.2-2.2c-0.6-0.6-0.6-1.6,0-2.2l7.5-7.6V37c-0.1-0.8,0.5-1.6,1.4-1.7C48,35.3,48,35.3,48.1,35.3z" /> <path d="m256 8c-137 0-248 111-248 248s111 248 248 248 248-111 248-248-111-248-248-248zm92.49 313-20 25a16 16 0 0 1 -22.49 2.5l-67-49.72a40 40 0 0 1 -15-31.23v-155.55a16 16 0 0 1 16-16h32a16 16 0 0 1 16 16v144l58 42.5a16 16 0 0 1 2.49 22.5z" /> </svg> </div> <div class="svgdiv"><svg id="photos" viewbox="0 0 700 400"> <path d="M308.1,277.95c0,35.7-28.9,64.6-64.6,64.6s-64.6-28.9-64.6-64.6s28.9-64.6,64.6-64.6S308.1,242.25,308.1,277.95z M440.3,116.05c25.8,0,46.7,20.9,46.7,46.7v122.4v103.8c0,27.5-22.3,49.8-49.8,49.8H49.8c-27.5,0-49.8-22.3-49.8-49.8v-103.9 v-122.3l0,0c0-25.8,20.9-46.7,46.7-46.7h93.4l4.4-18.6c6.7-28.8,32.4-49.2,62-49.2h74.1c29.6,0,55.3,20.4,62,49.2l4.3,18.6H440.3z M97.4,183.45c0-12.9-10.5-23.4-23.4-23.4c-13,0-23.5,10.5-23.5,23.4s10.5,23.4,23.4,23.4C86.9,206.95,97.4,196.45,97.4,183.45z M358.7,277.95c0-63.6-51.6-115.2-115.2-115.2s-115.2,51.6-115.2,115.2s51.6,115.2,115.2,115.2S358.7,341.55,358.7,277.95z" /> </svg></div>'),o={dataFields:{address:{correct:{count:0,directoriesToDisplay:[]},missing:{count:0,directoriesToDisplay:[]},inaccurate:{count:0,directoriesToDisplay:[]}},name:{correct:{count:0,directoriesToDisplay:[]},missing:{count:0,directoriesToDisplay:[]},inaccurate:{count:0,directoriesToDisplay:[]}},website:{missing:{count:0,directoriesToDisplay:[]},present:{count:0,directoriesToDisplay:[]}},phone:{missing:{count:0,directoriesToDisplay:[]},present:{count:0,directoriesToDisplay:[]}},openingHours:{missing:{count:0,directoriesToDisplay:[]},present:{count:0,directoriesToDisplay:[]}},photos:{missing:{count:0,directoriesToDisplay:[]},present:{count:0,directoriesToDisplay:[]}}},listings:{missing:{count:0,percentageOfTotal:0,directoriesToDisplay:[]},inaccurate:{count:0,percentageOfTotal:0,directoriesToDisplay:[]},correct:{count:0,percentageOfTotal:0,directoriesToDisplay:[]}}};element.resultsList&&(element.resultsList.innerHTML="");for(const l in uberall.directoryType){let c=e.filter((e=>void 0!==e.response.result&&e.response.result.directoryType===l)),u=Array.isArray(c)?c[0]:c;if(u&&"TECHNICAL_PROBLEMS"!=u.response.result.syncStatus){let e=u.response.result,c=document.createElement("div");if(c.id=l,c.classList.add("ubxresult"),c.innerHTML=r,"MISSING"!=e.nameStatus)for(let t in o.dataFields){let n=e[("address"==t?"street":t)+"Status"].toLowerCase();"mismatch"==n?n="inaccurate":"match"==n&&(n="correct"),o.dataFields[t].hasOwnProperty(n)&&(o.dataFields[t][n].count++,o.dataFields[t][n].directoriesToDisplay.push(e.directoryType))}if(e.email){let t=e.email.toLowerCase();t.includes("@")&&!a.emails.includes(t)&&(addMailToList(t,uberall.directoryType[l].name),a.emails.push(t))}if(e.website){let t=e.website.toLowerCase().replace(/http(s)?:\/\/|www\./gim,"").replace(/\?.+|\/$/gim,"");a.websites.includes(t)||a.websites.push(t)}if(e.phone){let t=e.phone.replace(/[^\d\+]/gi,"").replace(/(\+|00)4(1|3|9)/gi,"0");a.phones.includes(t)||a.phones.push(t)}if(e.name){let t=e.name;a.names.includes(t)||a.names.push(t)}if(e.streetAndNo){let t=e.streetAndNo.replace(/(?<=s|S)tr(\.)?(?=\s|$)/gi,"traße").replace(/[^a-zA-Z0-9ßäüö\s\-]/gi,"");a.address.includes(t)||a.address.push(t)}const d={portal_img:c.querySelector("#portal_img"),portal_name:c.querySelector("#portal_name"),listingurl:c.querySelector("#listingurl"),name:c.querySelector("#name"),number:c.querySelector("#number"),street:c.querySelector("#street"),website:c.querySelector("#website"),times:c.querySelector("#times"),photos:c.querySelector("#photos"),details:c.querySelector("#details"),timesInfo:c.querySelector("#timesInfo"),infos:c.querySelector(".infos")};let p={PRESENT:"https://static-prod.uberall.com/assets/statusCheck/present.svg",MISSING:"https://static-prod.uberall.com/assets/statusCheck/missing.svg",NOT_APPLICABLE:"https://static-prod.uberall.com/assets/statusCheck/not_available.svg"};if("undefined"!=typeof availabilityIcons)for(const e in p)availabilityIcons.hasOwnProperty(e)||(availabilityIcons[e]=p[e]),p.hasOwnProperty(e)||(p[e]=availabilityIcons[e]);if(d.portal_name&&(d.portal_name.textContent=uberall.directoryType[l].name),"SUCCESS"==u.status){if(!u.response.alreadyManaged&&!u.response.managedLocation||(u.response.alreadyManaged=!0),void 0!==u.response.result.attribution&&null!=u.response.result.attribution&&/movido|aadvanto|spectario/gi.test(u.response.result.attribution.name)&&void 0!==i){let e=u.response.result.name.replace(/[^a-z0-9]/gi,""),t=i.name.replace(/[^a-z0-9]/gi,"");(e.includes(t)||t.includes(e))&&u.response.result.zip==i.zip&&(u.response.alreadyManaged=!0)}u.response.result.attribution&&(s=u.response.result.attribution.name)}if(n||(n=u.response.alreadyManaged),n){if(d.infos){let e=`${s?s+":<br>":""}${statusCheckMessages["top.box.already.managed"]}`;d.infos.innerHTML=e,d.infos.classList.add("managed"),c.classList.add("managed"),c.querySelectorAll(".svgdiv").forEach((e=>{e.remove()}));let n=c.querySelector("#portal_img");n&&(n.src="https://static-prod.uberall.com/assets/statusCheck/safeguard_active.svg"),document.querySelectorAll(".ubxresult").forEach((n=>{let s=n.querySelector(".infos"),a=n.querySelector("#portal_img");a&&(a.src="https://static-prod.uberall.com/assets/statusCheck/safeguard_active.svg"),s.innerHTML=e,s.classList.add("managed"),n.classList.add("managed"),n.querySelectorAll(".svgdiv").forEach((e=>{e.remove()})),t.correct=100,t.incorrect=0,t.missing=0}))}}else{if(d.portal_img&&(d.portal_img.src=u.html.logo),d.times&&(/svg/i.test(d.times.tagName)?d.times.classList.add(CLASSNAME[e.openingHoursStatus]??""):d.times.src=p[e.openingHoursStatus],"PRESENT"==e.openingHoursStatus&&e.openingHours&&e.openingHours.length>0)){d.times.addEventListener("mouseenter",(function(e){d.timesInfo.style.display="flex",d.timesInfo.style.visibility="visible"})),d.times.addEventListener("mouseleave",(function(e){fadeOut(d.timesInfo)}));let t=["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"],n=d.timesInfo;for(let s=0;s<7;s++){let a=e.openingHours.filter((e=>e.dayOfWeek==s+1&&!e.hasOwnProperty("closed"))),i=`<b>${t[s]}:</b> Kapalı`,r=CLASSNAME.MISSING;a.length>0&&(r=CLASSNAME.PRESENT,i=`<b>${t[s]}:</b> ${a[0].from1} - ${a[0].to1}`,a[0].hasOwnProperty("from2")&&a[0].hasOwnProperty("to2")&&(i+=` | ${a[0].from2} - ${a[0].to2}`));let o=`<div id="timeLine">\n\t\t\t\t\t\t\t\t\t\t<svg class="${r}" style=width:20px;height:20px; viewBox="0 0 490 490"><path d="M245 0C109.5 0 0 109.5 0 245s109.5 245 245 245 245-109.5 245-245S380.5 0 245 0zm0 449.3c-112.6 0-204.3-91.7-204.3-204.3S132.4 40.7 245 40.7 449.3 132.4 449.3 245 357.6 449.3 245 449.3z"/><path d="M290.9 224.1h-25v-95.9c0-11.5-9.4-20.9-20.9-20.9s-20.9 9.4-20.9 20.9V245c0 11.5 9.4 20.9 20.9 20.9h45.9c11.5 0 20.9-9.4 20.9-20.9s-9.5-20.9-20.9-20.9z"/></svg>\n\t\t\t\t\t\t\t\t\t\t<span>${i}</span>\n\t\t\t\t\t\t\t\t\t</div>`;n.innerHTML+=o}}if(d.photos&&(/svg/i.test(d.photos.tagName)?d.photos.classList.add(CLASSNAME[e.photosStatus]??""):d.photos.src=p[e.photosStatus]),e.name){if(d.listingurl&&null!=e.listingUrl&&(d.listingurl.href=e.listingUrl),d.name&&(d.name.innerHTML=`<span class="${"MISMATCH"==e.nameStatus?CLASSNAME.MISMATCH:""}">${e.name}</span>`),d.street){let t;switch(e.streetAndNoStatus){case"MISSING":t=`<span class="${CLASSNAME.MISSING}">${e.streetAndNo?e.streetAndNo:statusCheckMessages["address.fields.missing"]}</span>`;break;case"MISMATCH":t=`<span class="${CLASSNAME.MISMATCH}">${e.streetAndNo}</span>`;break;case"MATCH":case"PRESENT":t=e.streetAndNo;break;default:t="-"}if(e.city)switch(t+=", ",e.cityStatus){case"MISSING":t+=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["city.error"]}</span>`;break;case"MISMATCH":t+=`<span class="${CLASSNAME.MISMATCH}">${e.city}</span>`;break;case"MATCH":case"PRESENT":t+=e.city;break}d.street.innerHTML=t}if(d.number){let t="";switch(e.phoneStatus){case"MISSING":t=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["phone.missing"]}</span>`;break;case"MISMATCH":t=`<span class="${CLASSNAME.MISMATCH}">${e.phone}</span>`;break;case"MATCH":case"PRESENT":t=`<span class="${CLASSNAME.PRESENT}">${e.phone}</span>`;break;case"NOT_APPLICABLE":t=`<span class="${CLASSNAME.NOT_APPLICABLE}">${statusCheckMessages["phone.not.applicable"]}</span>`;break}d.number.innerHTML=t}if(d.website){let t="";switch(e.websiteStatus){case"MISSING":t=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["website.missing"]}</span>`;break;case"MISMATCH":t=`<span class="${CLASSNAME.MISMATCH}">${e.website}</span>`;break;case"MATCH":case"PRESENT":t=`<span class="${CLASSNAME.PRESENT}">${e.website}</span>`;break;case"NOT_APPLICABLE":t=`<span class="${CLASSNAME.NOT_APPLICABLE}">${statusCheckMessages["website.not.applicable"]}</span>`;break}d.website.innerHTML=t}e.website&&(d.website.href=e.website),"MATCH"==e.nameStatus&&"MATCH"==e.streetAndNoStatus&&"MISMATCH"!=e.cityStatus&&"MISSING"!=e.cityStatus&&"MISSING"!=e.openingHoursStatus&&"MISSING"!=e.photosStatus&&"MISSING"!=e.websiteStatus&&"MISSING"!=e.phoneStatus?(t.correct++,o.listings.correct.directoriesToDisplay.push(e.directoryType)):(t.incorrect++,o.listings.inaccurate.directoriesToDisplay.push(e.directoryType))}else o.listings.missing.directoriesToDisplay.push(e.directoryType),t.missing++,d.name&&(d.name.innerHTML=`<span class="${CLASSNAME.MISSING}">${statusCheckMessages["listing.not.found"]}</span>`),d.times&&(d.times.style.display="none"),d.photos&&(d.photos.style.display="none"),d.details&&("boolean"==typeof DESCRIPTION_FOR_MISSING_PORTALS&&1==DESCRIPTION_FOR_MISSING_PORTALS&&uberall.directoryType[l].description?(d.details.classList.add("description"),d.details.innerHTML=uberall.directoryType[l].description):(d.details.innerHTML="",d.details.remove())),c.classList.add("noentry")}element.resultsList.append(c);let m=document.querySelector("#totalPortals");m&&(m.innerHTML=element.resultsList.childElementCount);for(let e in o.dataFields)if(o.dataFields[e],o.dataFields[e].hasOwnProperty("count"))o.dataFields[e].count=o.dataFields[e].directoriesToDisplay.length;else for(let t in o.dataFields[e])o.dataFields[e][t].hasOwnProperty("count")&&(o.dataFields[e][t].count=o.dataFields[e][t].directoriesToDisplay.length);for(let e in o.listings)o.listings[e].hasOwnProperty("count")&&(o.listings[e].count=o.listings[e].directoriesToDisplay.length,o.listings[e].percentageOfTotal=t["inaccurate"==e?"incorrect":e]/t.total*100);for(const e in o.dataFields){let t=document.querySelector(`#nearMe360${e}Div`);if(t){let n=o.dataFields[e].hasOwnProperty("inaccurate")?"inaccurate":"missing";if(o.dataFields[e][n].directoriesToDisplay.length){let s=o.dataFields[e][n].directoriesToDisplay,a=uberall.directoryType[s[0]].name;s.length>1&&(a+=(s.length>2?", ":" & ")+uberall.directoryType[s[1]].name,s.length>2&&(a+=" & "+uberall.directoryType[s[2]].name)),t.querySelector("#nearMe360Directories").innerHTML=a,t.removeAttribute("style")}else t.style.display="none"}}}}if(1==attribute.summary)for(const e in a)if(!e.includes("mail")){let t=e.substring(0,1).toUpperCase()+e.substring(1),n=`found${t}Div`;if(element.hasOwnProperty(n)&&element[n]&&a[e].length){let s=element[n].querySelector(`#found${t}`);s&&(a[e].forEach((e=>s.insertAdjacentHTML("beforeend","Websites"==t?`<span><a target="_blank" href="https://${e}" style="text-decoration:none;color:inherit;">${e}</a></span>`:`<span>${e}</span>`))),a[e].forEach((e=>s.insertAdjacentHTML("beforeend","Websites"==t?`<span><a target="_blank" href="https://${e}" style="text-decoration:none;color:inherit;">${e}</a></span>`:`<span>${e}</span>`))),element[n].style.display="flex")}}toggleForm(!1),toggleResults(!0),actualizeChart(t.missing,t.incorrect,t.correct),arrangePageBreaks()}}else toggleErrorModal("No data",!0),toggleForm(!0),toggleResults(!1)}function arrangePageBreaks(){document.querySelectorAll(".page-break").forEach((e=>{e.classList.remove("page-break")}));let e=element.resultsList.querySelector(".ubxresult");if(e){let t=e.offsetHeight,n=1e3,s=n-(element.queryInfo.offsetHeight+element.qualityText.offsetHeight+element.graphInfo.offsetHeight+element.summary.offsetHeight),a=parseInt(s/t),i=parseInt(n/t);element.resultsList.querySelectorAll(`.ubxresult:nth-child(${i}n+${a+1})`).forEach((e=>{e.classList.add("page-break")}))}}function removeParams(){let e=window.location.href.split("?")[0];window.history.replaceState({},document.title,e)}function getParams(){const e=window.location.search,t={};if(e){e.substring(1).split("&").forEach((e=>{let[n,s]=e.split("=");n=decodeURIComponent(n),s=decodeURIComponent(s),t[decodeURIComponent(n)]=/^(true|false)$/i.test(s??"")?"true"==s:decodeURIComponent(s)}))}return t}function setParams({ubrecheckid:e,ubrechecktoken:t,ubname:n,ubstreet:s,ubzip:a,ubcountry:i,ubcity:r,ubpdf:o}){removeParams();let l=window.location.href,c={};e&&t?(c.ubrecheckid=e,c.ubrechecktoken=t,o&&(c.ubpdf=o)):n&&s&&a&&i&&(c.autostart=!0,c.ubcountry=i,c.ubname=n,c.ubstreet=s,c.ubzip=a,c.ubcity=r??"");const u=Object.keys(c).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(c[e])}`)).join("&");l.includes("?")?l+=`&${u}`:l+=`?${u}`,removeParams(),window.history.replaceState({},"",l)}function getElements(e){return element={widget:document.querySelector("div.ub_status_check_widget"),ubwrap:document.querySelector("#ubwrap"),header:e.querySelector("#header"),headertext:e.querySelector("#headertext"),queryInfo:e.querySelector("#queryInfo"),alreadyManaged:e.querySelector("#alreadyManaged"),bottominfo:e.querySelector("#bottominfo"),button:e.querySelector("button#ubsend"),form:e.querySelector("#ubformfield"),ubform:e.querySelector("#ubform"),ubname:e.querySelector("input#ubname"),ubstreet:e.querySelector("input#ubstreet"),ubzip:e.querySelector("input#ubzip"),ubcountry:e.querySelector("select#ubcountry"),allTexts:e.querySelectorAll("p,h1,h2,h3,h4,h5,h6,span,input,select"),allLinks:e.querySelectorAll("a"),ctabutton:document.querySelector("#ctabutton"),ctatext:e.querySelector("#ctatext"),ctalink:e.querySelector("a#ctalink"),graphInfo:e.querySelector("#graphInfo"),graph:e.querySelector("#ubgraph"),ubgridwrap:e.querySelector("#ubgridwrap"),directoryGrid:e.querySelector("#ubgrid"),ubtable:e.querySelector("#ubtable"),topinfo:document.querySelector("#topinfo"),searchQuery:document.querySelector("#searchQuery"),queryLine:document.querySelector("#queryLine"),resultsList:document.querySelector("#resultsList"),result:document.querySelector(".ubxresult"),skipSvg:document.querySelector("#skipSvg"),predictionInput:document.querySelector("#prediction"),predictionList:document.querySelector("#predictionList"),copyLink:document.querySelector("#copyLink"),pdfExport:document.querySelector("#pdfExport"),qualityText:document.querySelector("#qualityText"),queryCaptionText:document.querySelector("#queryCaptionText"),resultsListText:document.querySelector("#resultsListText"),ubgridcaption:document.querySelector("#ubgridcaption"),foundEmailsDiv:document.querySelector("#foundEmailsDiv"),foundWebsitesDiv:document.querySelector("#foundWebsitesDiv"),foundNamesDiv:document.querySelector("#foundNamesDiv"),foundPhonesDiv:document.querySelector("#foundPhonesDiv"),foundAddressDiv:document.querySelector("#foundAddressDiv"),foundOwnersDiv:document.querySelector("#foundOwnersDiv"),loadingTips:document.querySelector("#loadingTips"),loadingImg:document.querySelector(".loading .modal img"),predictionform:document.querySelector("#predictionform"),summary:document.querySelector("#summary"),nearme360:document.querySelector("#ubnearme360"),emodal:document.querySelector(".emodal"),lmodal:document.querySelector(".modal"),tableheader:document.querySelector(".table-header")}}function toggleErrorModal(e="Aranan adres bulunamadı. Lütfen bilgileri kontrol edin.",t){let n=document.querySelector("div.error"),s=n.querySelector("p");if(n){const a=window.getComputedStyle(n).getPropertyValue("display");s.innerHTML=e,null==t&&(t="none"==a),toggleFlatBack(t),toggleButton(!t),n.style.display=1==t?"flex":"none"}}function toggleFlatBack(e){let t=document.querySelector("div.flatback");if(t){const n=window.getComputedStyle(t).getPropertyValue("display");t.style.display=null==e?"none"==n?"flex":"none":1==e?"flex":"none"}}var tipInterval;function toggleLoadingModal(e){clearInterval(tipInterval);let t=document.querySelector("div.loading");if(t){const n=window.getComputedStyle(t).getPropertyValue("display");if(null==e&&(e="none"==n),toggleFlatBack(e),t.style.display=1==e?"flex":"none",e&&element.loadingTips){let e=e=>Math.floor(Math.random()*(e+1)),t=element.loadingTips.querySelector("span")??element.loadingTips;t.visibility="hidden";let n=["#668CEB","#43ADD4","#B479AB","#E69597","#436f81","#815e4d","#577736","#9d7c9c","#6d9999","#7c6d99","#6d997f","#996d6d"];t.style.color=n[e(n.length)]+"ff",t.textContent=tipsToUse[e(tipsToUse.length)],fadeIn(t,30),tipsToUse.length>1&&(tipInterval=setInterval((()=>{fadeOut(t,30).then((()=>{t.style.color=n[e(n.length)]+"cc",t.textContent=tipsToUse[e(tipsToUse.length)],fadeIn(t,30)}))}),5e3))}}}function isLoadingModalVisible(){let e=document.querySelector("div.loading");if(e){return"none"!=window.getComputedStyle(e).getPropertyValue("display")}}function toggleResults(e){if(element.queryInfo&&element.header&&element.bottominfo){const t=window.getComputedStyle(element.header).getPropertyValue("display");null==e&&(e="none"==t),e?(easteregg.test(),element.header.style.display="none",element.bottominfo.style.display="flex",element.queryInfo.style.display="flex",element.bottominfo.style.visibility="visible",element.ubgridwrap.style.display="none",element.topinfo&&attribute.hasOwnProperty("showtopinfo")&&1!=attribute.showtopinfo&&(element.topinfo.style.display="none"),actualizeDirectoryGrid(!1)):(element.header.style.display="flex",element.bottominfo.style.display="none",element.queryInfo.style.display="none",element.bottominfo.style.visibility="hidden",element.ubgridwrap.style.display="flex",element.topinfo&&element.topinfo.style.removeProperty("display"),actualizeDirectoryGrid(!0))}}function clearResults(){element.resultsList&&(element.resultsList.innerHTML=""),element.copyLink&&element.copyLink.removeAttribute("url"),element.pdfExport&&(element.pdfExport.removeAttribute("recheckid"),element.pdfExport.removeAttribute("token"),element.pdfExport.removeAttribute("pdf"))}function actualizeDirectoryGrid(e,t,n=attribute.directories){if(element.ubgridwrap&&element.directoryGrid){if(element.directoryGrid.innerHTML="",element.ubgridwrap.style.display="none",void 0===e&&element.bottominfo){e="none"==getComputedStyle(element.bottominfo).display}if("string"==typeof n&&(n=n.split(",")),e&&(!attribute.hasOwnProperty("showdirectorygrid")||0!=attribute.showdirectorygrid)){t||(t=element.ubcountry?element.ubcountry.value:"TR"),t=t.toLowerCase(),n&&n.length||(n=Object.keys(uberall.directoryType));for(const e of n)if(element.ubgridwrap.style.display="flex",uberall.directoryType[e].countries.includes(t)){let t=document.createElement("div");t.className="gridEntry",t.innerHTML=`<img draggable="false" class="gridEntryLogo" src="${uberall.directoryType[e].logo}"><span class="gridEntryName">${uberall.directoryType[e].name}</span>`,element.directoryGrid.appendChild(t)}}}}function getWidgetAttributes(e){attribute={};for(const t of e.attributes){let e=t.value;e.length>0&&(/^(true|false)$/i.test(e)&&(e="true"==e),attribute[t.name.replace("data-","")]=e)}return attribute}function toggleButton(e){if(element.button)if(element.button.getAttribute("disabled")||e)element.button.innerHTML="ARA",element.button.removeAttribute("disabled"),element.ubcountry.removeAttribute("disabled"),element.ubname.removeAttribute("disabled"),element.ubstreet.removeAttribute("disabled"),element.ubzip.removeAttribute("disabled"),element.form.removeAttribute("disabled"),element.predictionInput.removeAttribute("disabled");else if(!element.button.getAttribute("disabled")||!1===e){const e="https://static.wixstatic.com/media/52c20f_597105a39da247c49701e2cd585687d3~mv2.gif";element.button.innerHTML=`<img title="loading" draggable="false" src="${e}" height="40px" >`,element.button.setAttribute("disabled",!0),element.ubcountry.setAttribute("disabled",!0),element.ubname.setAttribute("disabled",!0),element.ubstreet.setAttribute("disabled",!0),element.ubzip.setAttribute("disabled",!0),element.form.setAttribute("disabled",!0),element.predictionInput.setAttribute("disabled",!0)}}async function toggleForm(e){let t=document.querySelector("#ubformfield"),n=document.querySelector("a.ubsc_change-search-data");if(t){const s=window.getComputedStyle(t).getPropertyValue("display");null==e&&(e="none"==s),e?(n&&(n.querySelector("span").textContent="kapat"),t.style.display="flex",t.style.visibility="visible"):(n&&(n.querySelector("span").textContent="KONUM DEĞİŞTİR"),await fadeOut(t))}}async function fadeOut(e,t=10,n=!0){return await new Promise(((s,a)=>{if(e){let a=t,i=setInterval((()=>{a--,e.style.opacity=a/t,a<=0&&(e.style.visibility="hidden",n&&(e.style.display="none"),e.style.opacity=1,clearInterval(i),s(!0))}),20)}else a("Element not found")}))}async function fadeIn(e,t=10,n=!0){return await new Promise(((s,a)=>{if(e){let a=0;e.style.visibility="visible",n&&e.style.removeProperty("display"),e.style.opacity=0;let i=setInterval((()=>{a++,e.style.opacity=a/t,a>=t&&(e.style.opacity=1,clearInterval(i),s(!0))}),20)}else a("Element not found")}))}function actualizeChart(e=1,t=1,n=1,s=null){let a=null,i=null,r=null,o=null;if(Array.isArray(e)&&(a=e,e=a.length),Array.isArray(t)&&(i=t,t=i.length),Array.isArray(n)&&(r=n,n=r.length),Array.isArray(s)&&(o=s,s=o.length),"number"==typeof s&&0==s&&(s=null),element.graphInfo)if(attribute.hasOwnProperty("showgraph")&&1!=attribute.showgraph)element.graphInfo.style.display="none";else{element.graphInfo.style.display="flex";let a=element.graph.querySelector("canvas");if(!a)return null;let i=a.getContext("2d");if("undefined"==typeof chart&&"undefined"!=typeof Chart){let e={type:"doughnut",data:{labels:["0% Yanlış","0% Eksik","0% Doğru"],datasets:[{label:"",data:[5,5,5],backgroundColor:["rgb(251,176,54)","rgb(232,99,99)","rgb(99,166,99)"],borderColor:"#ffffff88"}]},plugins:[],options:{plugins:{legend:{position:"left",labels:{usePointStyle:!0,boxWidth:30,padding:10,font:{size:14}}}},scales:{}}};s&&(e.data.labels.push(["100% Lädt..."]),e.data.datasets[0].data=[0,0,0,0],e.data.datasets[0].backgroundColor.push("rgb(170, 174, 201)")),chart=new Chart(i,e),a.style.width="300",a.style.height="300"}let r=t+e+n+(s??0),o={correct:(100/r*n).toFixed(0),missing:(100/r*e).toFixed(0),incorrect:(100/r*t).toFixed(0),loading:(100/r*s??0).toFixed(0)},l={labels:[`${o.incorrect}% Yanlış`,`${o.missing}% Eksik`,`${o.correct}% Doğru`],datasets:[{label:"",data:[t,e,n],backgroundColor:["rgb(251,176,54)","rgb(232,99,99)","rgb(99,166,99)"],borderColor:"#ffffff88"}]};s&&(l.labels.push([`${o.loading}% Lädt...`]),l.datasets[0].data=[t,e,n,s],l.datasets[0].backgroundColor.push("rgb(170, 174, 201)")),"undefined"!=typeof chart&&(chart.data=l,s&&(chart.options.animation.duration=0),chart.update())}}const marketingTips=["Merhaba"];let randomLoadingGifs=["https://static.wixstatic.com/media/52c20f_ca1ccd73ff6b4c18bcfe67e7dfcd8bea~mv2.gif","https://static.wixstatic.com/media/52c20f_24e1624f84364dfa9e9a51c913c6e6cf~mv2.gif","https://static.wixstatic.com/media/52c20f_da8aebaec44e489f9fb667dd8487fa69~mv2.gif","https://i2.wp.com/cdn.dribbble.com/users/1787505/screenshots/7300251/shot.gif","https://mir-s3-cdn-cf.behance.net/project_modules/disp/585d0331234507.564a1d239ac5e.gif","https://www.munciepower.com/images/elements/loaders/loader.gif","https://miro.medium.com/v2/resize:fit:679/1*Gvgic29bgoiGVLmI6AVbUg.gif","https://www.icegif.com/wp-content/uploads/2023/07/icegif-1265.gif","https://i.pinimg.com/originals/6b/e0/89/6be0890f52e31d35d840d4fe2e10385b.gif","https://mir-s3-cdn-cf.behance.net/project_modules/disp/04de2e31234507.564a1d23645bf.gif","https://i.pinimg.com/originals/3d/1b/73/3d1b739fb2546948f207d2be7ae1b105.gif","https://vento.digital/file/icon/plakaliknotifloading.gif","https://assets-v2.lottiefiles.com/a/ba184576-1161-11ee-9123-f7d14218e24f/1zrahlsiVe.gif","https://i.pinimg.com/originals/c7/e1/b7/c7e1b7b5753737039e1bdbda578132b8.gif","https://www.icegif.com/wp-content/uploads/2023/07/icegif-1262.gif"];